<?xml version="1.0" encoding="UTF-8"?>
<!DOCTYPE html PUBLIC "-//W3C//DTD XHTML 1.0 Strict//EN" "http://www.w3.org/TR/xhtml1/DTD/xhtml1-strict.dtd">
<html xmlns="http://www.w3.org/1999/xhtml" xml:lang="en_US" lang="en_US">
<head>
  <meta http-equiv="Content-Type" content="text/html; charset=utf-8" />
  <title>Qt 4.8: textedit.cpp Example File (demos/textedit/textedit.cpp)</title>
  <link rel="stylesheet" type="text/css" href="style/style.css" />
  <script src="scripts/jquery.js" type="text/javascript"></script>
  <script src="scripts/functions.js" type="text/javascript"></script>
  <link rel="stylesheet" type="text/css" href="style/superfish.css" />
  <link rel="stylesheet" type="text/css" href="style/narrow.css" />
  <!--[if IE]>
<meta name="MSSmartTagsPreventParsing" content="true">
<meta http-equiv="imagetoolbar" content="no">
<![endif]-->
<!--[if lt IE 7]>
<link rel="stylesheet" type="text/css" href="style/style_ie6.css">
<![endif]-->
<!--[if IE 7]>
<link rel="stylesheet" type="text/css" href="style/style_ie7.css">
<![endif]-->
<!--[if IE 8]>
<link rel="stylesheet" type="text/css" href="style/style_ie8.css">
<![endif]-->

<script src="scripts/superfish.js" type="text/javascript"></script>
<script src="scripts/narrow.js" type="text/javascript"></script>

</head>
<body class="" onload="CheckEmptyAndLoadList();">
 <div class="header" id="qtdocheader">
    <div class="content"> 
    <div id="nav-logo">
      <a href="index.html">Home</a></div>
    <a href="index.html" class="qtref"><span>Qt Reference Documentation</span></a>
    <div id="narrowsearch"></div>
    <div id="nav-topright">
      <ul>
        <li class="nav-topright-home"><a href="http://qt.digia.com/">Qt HOME</a></li>
        <li class="nav-topright-dev"><a href="http://qt-project.org/">DEV</a></li>
        <li class="nav-topright-doc nav-topright-doc-active"><a href="http://qt-project.org/doc/">
          DOC</a></li>
        <li class="nav-topright-blog"><a href="http://blog.qt.digia.com/">BLOG</a></li>
      </ul>
    </div>
    <div id="shortCut">
      <ul>
        <li class="shortCut-topleft-inactive"><span><a href="index.html">Qt 4.8</a></span></li>
        <li class="shortCut-topleft-active"><a href="http://qt-project.org/doc/">ALL VERSIONS        </a></li>
      </ul>
     </div>
 <ul class="sf-menu" id="narrowmenu"> 
             <li><a href="#">API Lookup</a> 
                 <ul> 
                     <li><a href="classes.html">Class index</a></li> 
           <li><a href="functions.html">Function index</a></li> 
           <li><a href="modules.html">Modules</a></li> 
           <li><a href="namespaces.html">Namespaces</a></li> 
           <li><a href="qtglobal.html">Global Declarations</a></li> 
           <li><a href="qdeclarativeelements.html">QML elements</a></li> 
             </ul> 
             </li> 
             <li><a href="#">Qt Topics</a> 
                 <ul> 
                        <li><a href="qt-basic-concepts.html">Programming with Qt</a></li>  
                        <li><a href="qtquick.html">Device UIs &amp; Qt Quick</a></li>  
                        <li><a href="qt-gui-concepts.html">UI Design with Qt</a></li>  
                        <li><a href="supported-platforms.html">Supported Platforms</a></li>  
                        <li><a href="technology-apis.html">Qt and Key Technologies</a></li>  
                        <li><a href="best-practices.html">How-To's and Best Practices</a></li>  
              </ul> 
                 </li> 
                 <li><a href="#">Examples</a> 
                     <ul> 
                       <li><a href="all-examples.html">Examples</a></li> 
                       <li><a href="tutorials.html">Tutorials</a></li> 
                       <li><a href="demos.html">Demos</a></li> 
                       <li><a href="qdeclarativeexamples.html">QML Examples</a></li> 
                </ul> 
                     </li> 
                 </ul> 
    </div>
  </div>
  <div class="wrapper">
    <div class="hd">
      <span></span>
    </div>
    <div class="bd group">
      <div class="sidebar">
        <div class="searchlabel">
          Search index:</div>
        <div class="search" id="sidebarsearch">
          <form id="qtdocsearch" action="" onsubmit="return false;">
            <fieldset>
              <input type="text" name="searchstring" id="pageType" value="" />
 <div id="resultdialog"> 
 <a href="#" id="resultclose">Close</a> 
 <p id="resultlinks" class="all"><a href="#" id="showallresults">All</a> | <a href="#" id="showapiresults">API</a> | <a href="#" id="showarticleresults">Articles</a> | <a href="#" id="showexampleresults">Examples</a></p> 
 <p id="searchcount" class="all"><span id="resultcount"></span><span id="apicount"></span><span id="articlecount"></span><span id="examplecount"></span>&nbsp;results:</p> 
 <ul id="resultlist" class="all"> 
 </ul> 
 </div> 
            </fieldset>
          </form>
        </div>
        <div class="box first bottombar" id="lookup">
          <h2 title="API Lookup"><span></span>
            API Lookup</h2>
          <div  id="list001" class="list">
          <ul id="ul001" >
              <li class="defaultLink"><a href="classes.html">Class index</a></li>
              <li class="defaultLink"><a href="functions.html">Function index</a></li>
              <li class="defaultLink"><a href="modules.html">Modules</a></li>
              <li class="defaultLink"><a href="namespaces.html">Namespaces</a></li>
              <li class="defaultLink"><a href="qtglobal.html">Global Declarations</a></li>
              <li class="defaultLink"><a href="qdeclarativeelements.html">QML elements</a></li>
            </ul> 
          </div>
        </div>
        <div class="box bottombar" id="topics">
          <h2 title="Qt Topics"><span></span>
            Qt Topics</h2>
          <div id="list002" class="list">
            <ul id="ul002" >
               <li class="defaultLink"><a href="qt-basic-concepts.html">Programming with Qt</a></li> 
               <li class="defaultLink"><a href="qtquick.html">Device UIs &amp; Qt Quick</a></li> 
               <li class="defaultLink"><a href="qt-gui-concepts.html">UI Design with Qt</a></li> 
               <li class="defaultLink"><a href="supported-platforms.html">Supported Platforms</a></li>  
               <li class="defaultLink"><a href="technology-apis.html">Qt and Key Technologies</a></li> 
               <li class="defaultLink"><a href="best-practices.html">How-To's and Best Practices</a></li> 
            </ul>  
          </div>
        </div>
        <div class="box" id="examples">
          <h2 title="Examples"><span></span>
            Examples</h2>
          <div id="list003" class="list">
        <ul id="ul003">
              <li class="defaultLink"><a href="all-examples.html">Examples</a></li>
              <li class="defaultLink"><a href="tutorials.html">Tutorials</a></li>
              <li class="defaultLink"><a href="demos.html">Demos</a></li>
              <li class="defaultLink"><a href="qdeclarativeexamples.html">QML Examples</a></li>
            </ul> 
          </div>
        </div>
      </div>
      <div class="wrap">
        <div class="toolbar">
          <div class="breadcrumb toolblock">
            <ul>
              <li class="first"><a href="index.html">Home</a></li>
              <!--  Breadcrumbs go here -->
            </ul>
          </div>
          <div class="toolbuttons toolblock">
            <ul>
              <li id="smallA" class="t_button">A</li>
              <li id="medA" class="t_button active">A</li>
              <li id="bigA" class="t_button">A</li>
              <li id="print" class="t_button"><a href="javascript:this.print();">
                <span>Print</span></a></li>
            </ul>
        </div>
        </div>
        <div class="content mainContent">
<h1 class="title">textedit.cpp Example File</h1>
<span class="small-subtitle">demos/textedit/textedit.cpp</span>
<!-- $$$demos/textedit/textedit.cpp-description -->
<div class="descr"> <a name="details"></a>
<pre class="cpp"> <span class="comment">/****************************************************************************
 **
 ** Copyright (C) 2015 The Qt Company Ltd.
 ** Contact: http://www.qt.io/licensing/
 **
 ** This file is part of the demonstration applications of the Qt Toolkit.
 **
 ** $QT_BEGIN_LICENSE:LGPL$
 ** Commercial License Usage
 ** Licensees holding valid commercial Qt licenses may use this file in
 ** accordance with the commercial license agreement provided with the
 ** Software or, alternatively, in accordance with the terms contained in
 ** a written agreement between you and The Qt Company. For licensing terms
 ** and conditions see http://www.qt.io/terms-conditions. For further
 ** information use the contact form at http://www.qt.io/contact-us.
 **
 ** GNU Lesser General Public License Usage
 ** Alternatively, this file may be used under the terms of the GNU Lesser
 ** General Public License version 2.1 or version 3 as published by the Free
 ** Software Foundation and appearing in the file LICENSE.LGPLv21 and
 ** LICENSE.LGPLv3 included in the packaging of this file. Please review the
 ** following information to ensure the GNU Lesser General Public License
 ** requirements will be met: https://www.gnu.org/licenses/lgpl.html and
 ** http://www.gnu.org/licenses/old-licenses/lgpl-2.1.html.
 **
 ** As a special exception, The Qt Company gives you certain additional
 ** rights. These rights are described in The Qt Company LGPL Exception
 ** version 1.1, included in the file LGPL_EXCEPTION.txt in this package.
 **
 ** GNU General Public License Usage
 ** Alternatively, this file may be used under the terms of the GNU
 ** General Public License version 3.0 as published by the Free Software
 ** Foundation and appearing in the file LICENSE.GPL included in the
 ** packaging of this file.  Please review the following information to
 ** ensure the GNU General Public License version 3.0 requirements will be
 ** met: http://www.gnu.org/copyleft/gpl.html.
 **
 ** $QT_END_LICENSE$
 **
 ****************************************************************************/</span>

 <span class="preprocessor">#include &quot;textedit.h&quot;</span>

 <span class="preprocessor">#include &lt;QAction&gt;</span>
 <span class="preprocessor">#include &lt;QApplication&gt;</span>
 <span class="preprocessor">#include &lt;QClipboard&gt;</span>
 <span class="preprocessor">#include &lt;QColorDialog&gt;</span>
 <span class="preprocessor">#include &lt;QComboBox&gt;</span>
 <span class="preprocessor">#include &lt;QFontComboBox&gt;</span>
 <span class="preprocessor">#include &lt;QFile&gt;</span>
 <span class="preprocessor">#include &lt;QFileDialog&gt;</span>
 <span class="preprocessor">#include &lt;QFileInfo&gt;</span>
 <span class="preprocessor">#include &lt;QFontDatabase&gt;</span>
 <span class="preprocessor">#include &lt;QMenu&gt;</span>
 <span class="preprocessor">#include &lt;QMenuBar&gt;</span>
 <span class="preprocessor">#include &lt;QPrintDialog&gt;</span>
 <span class="preprocessor">#include &lt;QPrinter&gt;</span>
 <span class="preprocessor">#include &lt;QTextCodec&gt;</span>
 <span class="preprocessor">#include &lt;QTextEdit&gt;</span>
 <span class="preprocessor">#include &lt;QToolBar&gt;</span>
 <span class="preprocessor">#include &lt;QTextCursor&gt;</span>
 <span class="preprocessor">#include &lt;QTextDocumentWriter&gt;</span>
 <span class="preprocessor">#include &lt;QTextList&gt;</span>
 <span class="preprocessor">#include &lt;QtDebug&gt;</span>
 <span class="preprocessor">#include &lt;QCloseEvent&gt;</span>
 <span class="preprocessor">#include &lt;QMessageBox&gt;</span>
 <span class="preprocessor">#include &lt;QPrintPreviewDialog&gt;</span>

 <span class="preprocessor">#ifdef Q_WS_MAC</span>
 <span class="keyword">const</span> <span class="type"><a href="qstring.html">QString</a></span> rsrcPath <span class="operator">=</span> <span class="string">&quot;:/images/mac&quot;</span>;
 <span class="preprocessor">#else</span>
 <span class="keyword">const</span> <span class="type"><a href="qstring.html">QString</a></span> rsrcPath <span class="operator">=</span> <span class="string">&quot;:/images/win&quot;</span>;
 <span class="preprocessor">#endif</span>

 TextEdit<span class="operator">::</span>TextEdit(<span class="type"><a href="qwidget.html">QWidget</a></span> <span class="operator">*</span>parent)
     : <span class="type"><a href="qmainwindow.html">QMainWindow</a></span>(parent)
 {
     setToolButtonStyle(<span class="type"><a href="qt.html">Qt</a></span><span class="operator">::</span>ToolButtonFollowStyle);
     setupFileActions();
     setupEditActions();
     setupTextActions();

     {
         <span class="type"><a href="qmenu.html">QMenu</a></span> <span class="operator">*</span>helpMenu <span class="operator">=</span> <span class="keyword">new</span> <span class="type"><a href="qmenu.html">QMenu</a></span>(tr(<span class="string">&quot;Help&quot;</span>)<span class="operator">,</span> <span class="keyword">this</span>);
         menuBar()<span class="operator">-</span><span class="operator">&gt;</span>addMenu(helpMenu);
         helpMenu<span class="operator">-</span><span class="operator">&gt;</span>addAction(tr(<span class="string">&quot;About&quot;</span>)<span class="operator">,</span> <span class="keyword">this</span><span class="operator">,</span> SLOT(about()));
         helpMenu<span class="operator">-</span><span class="operator">&gt;</span>addAction(tr(<span class="string">&quot;About &amp;Qt&quot;</span>)<span class="operator">,</span> qApp<span class="operator">,</span> SLOT(aboutQt()));
     }

     textEdit <span class="operator">=</span> <span class="keyword">new</span> <span class="type"><a href="qtextedit.html">QTextEdit</a></span>(<span class="keyword">this</span>);
     connect(textEdit<span class="operator">,</span> SIGNAL(currentCharFormatChanged(<span class="type"><a href="qtextcharformat.html">QTextCharFormat</a></span>))<span class="operator">,</span>
             <span class="keyword">this</span><span class="operator">,</span> SLOT(currentCharFormatChanged(<span class="type"><a href="qtextcharformat.html">QTextCharFormat</a></span>)));
     connect(textEdit<span class="operator">,</span> SIGNAL(cursorPositionChanged())<span class="operator">,</span>
             <span class="keyword">this</span><span class="operator">,</span> SLOT(cursorPositionChanged()));

     setCentralWidget(textEdit);
     textEdit<span class="operator">-</span><span class="operator">&gt;</span>setFocus();
     setCurrentFileName(<span class="type"><a href="qstring.html">QString</a></span>());

     fontChanged(textEdit<span class="operator">-</span><span class="operator">&gt;</span>font());
     colorChanged(textEdit<span class="operator">-</span><span class="operator">&gt;</span>textColor());
     alignmentChanged(textEdit<span class="operator">-</span><span class="operator">&gt;</span>alignment());

     connect(textEdit<span class="operator">-</span><span class="operator">&gt;</span>document()<span class="operator">,</span> SIGNAL(modificationChanged(<span class="type">bool</span>))<span class="operator">,</span>
             actionSave<span class="operator">,</span> SLOT(setEnabled(<span class="type">bool</span>)));
     connect(textEdit<span class="operator">-</span><span class="operator">&gt;</span>document()<span class="operator">,</span> SIGNAL(modificationChanged(<span class="type">bool</span>))<span class="operator">,</span>
             <span class="keyword">this</span><span class="operator">,</span> SLOT(setWindowModified(<span class="type">bool</span>)));
     connect(textEdit<span class="operator">-</span><span class="operator">&gt;</span>document()<span class="operator">,</span> SIGNAL(undoAvailable(<span class="type">bool</span>))<span class="operator">,</span>
             actionUndo<span class="operator">,</span> SLOT(setEnabled(<span class="type">bool</span>)));
     connect(textEdit<span class="operator">-</span><span class="operator">&gt;</span>document()<span class="operator">,</span> SIGNAL(redoAvailable(<span class="type">bool</span>))<span class="operator">,</span>
             actionRedo<span class="operator">,</span> SLOT(setEnabled(<span class="type">bool</span>)));

     setWindowModified(textEdit<span class="operator">-</span><span class="operator">&gt;</span>document()<span class="operator">-</span><span class="operator">&gt;</span>isModified());
     actionSave<span class="operator">-</span><span class="operator">&gt;</span>setEnabled(textEdit<span class="operator">-</span><span class="operator">&gt;</span>document()<span class="operator">-</span><span class="operator">&gt;</span>isModified());
     actionUndo<span class="operator">-</span><span class="operator">&gt;</span>setEnabled(textEdit<span class="operator">-</span><span class="operator">&gt;</span>document()<span class="operator">-</span><span class="operator">&gt;</span>isUndoAvailable());
     actionRedo<span class="operator">-</span><span class="operator">&gt;</span>setEnabled(textEdit<span class="operator">-</span><span class="operator">&gt;</span>document()<span class="operator">-</span><span class="operator">&gt;</span>isRedoAvailable());

     connect(actionUndo<span class="operator">,</span> SIGNAL(triggered())<span class="operator">,</span> textEdit<span class="operator">,</span> SLOT(undo()));
     connect(actionRedo<span class="operator">,</span> SIGNAL(triggered())<span class="operator">,</span> textEdit<span class="operator">,</span> SLOT(redo()));

     actionCut<span class="operator">-</span><span class="operator">&gt;</span>setEnabled(<span class="keyword">false</span>);
     actionCopy<span class="operator">-</span><span class="operator">&gt;</span>setEnabled(<span class="keyword">false</span>);

     connect(actionCut<span class="operator">,</span> SIGNAL(triggered())<span class="operator">,</span> textEdit<span class="operator">,</span> SLOT(cut()));
     connect(actionCopy<span class="operator">,</span> SIGNAL(triggered())<span class="operator">,</span> textEdit<span class="operator">,</span> SLOT(copy()));
     connect(actionPaste<span class="operator">,</span> SIGNAL(triggered())<span class="operator">,</span> textEdit<span class="operator">,</span> SLOT(paste()));

     connect(textEdit<span class="operator">,</span> SIGNAL(copyAvailable(<span class="type">bool</span>))<span class="operator">,</span> actionCut<span class="operator">,</span> SLOT(setEnabled(<span class="type">bool</span>)));
     connect(textEdit<span class="operator">,</span> SIGNAL(copyAvailable(<span class="type">bool</span>))<span class="operator">,</span> actionCopy<span class="operator">,</span> SLOT(setEnabled(<span class="type">bool</span>)));

 <span class="preprocessor">#ifndef QT_NO_CLIPBOARD</span>
     connect(<span class="type"><a href="qapplication.html">QApplication</a></span><span class="operator">::</span>clipboard()<span class="operator">,</span> SIGNAL(dataChanged())<span class="operator">,</span> <span class="keyword">this</span><span class="operator">,</span> SLOT(clipboardDataChanged()));
 <span class="preprocessor">#endif</span>

     <span class="type"><a href="qstring.html">QString</a></span> initialFile <span class="operator">=</span> <span class="string">&quot;:/example.html&quot;</span>;
     <span class="keyword">const</span> <span class="type"><a href="qstringlist.html">QStringList</a></span> args <span class="operator">=</span> <span class="type"><a href="qcoreapplication.html">QCoreApplication</a></span><span class="operator">::</span>arguments();
     <span class="keyword">if</span> (args<span class="operator">.</span>count() <span class="operator">=</span><span class="operator">=</span> <span class="number">2</span>)
         initialFile <span class="operator">=</span> args<span class="operator">.</span>at(<span class="number">1</span>);

     <span class="keyword">if</span> (<span class="operator">!</span>load(initialFile))
         fileNew();
 }

 <span class="type">void</span> TextEdit<span class="operator">::</span>closeEvent(<span class="type"><a href="qcloseevent.html">QCloseEvent</a></span> <span class="operator">*</span>e)
 {
     <span class="keyword">if</span> (maybeSave())
         e<span class="operator">-</span><span class="operator">&gt;</span>accept();
     <span class="keyword">else</span>
         e<span class="operator">-</span><span class="operator">&gt;</span>ignore();
 }

 <span class="type">void</span> TextEdit<span class="operator">::</span>setupFileActions()
 {
     <span class="type"><a href="qtoolbar.html">QToolBar</a></span> <span class="operator">*</span>tb <span class="operator">=</span> <span class="keyword">new</span> <span class="type"><a href="qtoolbar.html">QToolBar</a></span>(<span class="keyword">this</span>);
     tb<span class="operator">-</span><span class="operator">&gt;</span>setWindowTitle(tr(<span class="string">&quot;File Actions&quot;</span>));
     addToolBar(tb);

     <span class="type"><a href="qmenu.html">QMenu</a></span> <span class="operator">*</span>menu <span class="operator">=</span> <span class="keyword">new</span> <span class="type"><a href="qmenu.html">QMenu</a></span>(tr(<span class="string">&quot;&amp;File&quot;</span>)<span class="operator">,</span> <span class="keyword">this</span>);
     menuBar()<span class="operator">-</span><span class="operator">&gt;</span>addMenu(menu);

     <span class="type"><a href="qaction.html">QAction</a></span> <span class="operator">*</span>a;

     <span class="type"><a href="qicon.html">QIcon</a></span> newIcon <span class="operator">=</span> <span class="type"><a href="qicon.html">QIcon</a></span><span class="operator">::</span>fromTheme(<span class="string">&quot;document-new&quot;</span><span class="operator">,</span> <span class="type"><a href="qicon.html">QIcon</a></span>(rsrcPath <span class="operator">+</span> <span class="string">&quot;/filenew.png&quot;</span>));
     a <span class="operator">=</span> <span class="keyword">new</span> <span class="type"><a href="qaction.html">QAction</a></span>( newIcon<span class="operator">,</span> tr(<span class="string">&quot;&amp;New&quot;</span>)<span class="operator">,</span> <span class="keyword">this</span>);
     a<span class="operator">-</span><span class="operator">&gt;</span>setPriority(<span class="type"><a href="qaction.html">QAction</a></span><span class="operator">::</span>LowPriority);
     a<span class="operator">-</span><span class="operator">&gt;</span>setShortcut(<span class="type"><a href="qkeysequence.html">QKeySequence</a></span><span class="operator">::</span>New);
     connect(a<span class="operator">,</span> SIGNAL(triggered())<span class="operator">,</span> <span class="keyword">this</span><span class="operator">,</span> SLOT(fileNew()));
     tb<span class="operator">-</span><span class="operator">&gt;</span>addAction(a);
     menu<span class="operator">-</span><span class="operator">&gt;</span>addAction(a);

     a <span class="operator">=</span> <span class="keyword">new</span> <span class="type"><a href="qaction.html">QAction</a></span>(<span class="type"><a href="qicon.html">QIcon</a></span><span class="operator">::</span>fromTheme(<span class="string">&quot;document-open&quot;</span><span class="operator">,</span> <span class="type"><a href="qicon.html">QIcon</a></span>(rsrcPath <span class="operator">+</span> <span class="string">&quot;/fileopen.png&quot;</span>))<span class="operator">,</span>
                     tr(<span class="string">&quot;&amp;Open...&quot;</span>)<span class="operator">,</span> <span class="keyword">this</span>);
     a<span class="operator">-</span><span class="operator">&gt;</span>setShortcut(<span class="type"><a href="qkeysequence.html">QKeySequence</a></span><span class="operator">::</span>Open);
     connect(a<span class="operator">,</span> SIGNAL(triggered())<span class="operator">,</span> <span class="keyword">this</span><span class="operator">,</span> SLOT(fileOpen()));
     tb<span class="operator">-</span><span class="operator">&gt;</span>addAction(a);
     menu<span class="operator">-</span><span class="operator">&gt;</span>addAction(a);

     menu<span class="operator">-</span><span class="operator">&gt;</span>addSeparator();

     actionSave <span class="operator">=</span> a <span class="operator">=</span> <span class="keyword">new</span> <span class="type"><a href="qaction.html">QAction</a></span>(<span class="type"><a href="qicon.html">QIcon</a></span><span class="operator">::</span>fromTheme(<span class="string">&quot;document-save&quot;</span><span class="operator">,</span> <span class="type"><a href="qicon.html">QIcon</a></span>(rsrcPath <span class="operator">+</span> <span class="string">&quot;/filesave.png&quot;</span>))<span class="operator">,</span>
                                  tr(<span class="string">&quot;&amp;Save&quot;</span>)<span class="operator">,</span> <span class="keyword">this</span>);
     a<span class="operator">-</span><span class="operator">&gt;</span>setShortcut(<span class="type"><a href="qkeysequence.html">QKeySequence</a></span><span class="operator">::</span>Save);
     connect(a<span class="operator">,</span> SIGNAL(triggered())<span class="operator">,</span> <span class="keyword">this</span><span class="operator">,</span> SLOT(fileSave()));
     a<span class="operator">-</span><span class="operator">&gt;</span>setEnabled(<span class="keyword">false</span>);
     tb<span class="operator">-</span><span class="operator">&gt;</span>addAction(a);
     menu<span class="operator">-</span><span class="operator">&gt;</span>addAction(a);

     a <span class="operator">=</span> <span class="keyword">new</span> <span class="type"><a href="qaction.html">QAction</a></span>(tr(<span class="string">&quot;Save &amp;As...&quot;</span>)<span class="operator">,</span> <span class="keyword">this</span>);
     a<span class="operator">-</span><span class="operator">&gt;</span>setPriority(<span class="type"><a href="qaction.html">QAction</a></span><span class="operator">::</span>LowPriority);
     connect(a<span class="operator">,</span> SIGNAL(triggered())<span class="operator">,</span> <span class="keyword">this</span><span class="operator">,</span> SLOT(fileSaveAs()));
     menu<span class="operator">-</span><span class="operator">&gt;</span>addAction(a);
     menu<span class="operator">-</span><span class="operator">&gt;</span>addSeparator();

 <span class="preprocessor">#ifndef QT_NO_PRINTER</span>
     a <span class="operator">=</span> <span class="keyword">new</span> <span class="type"><a href="qaction.html">QAction</a></span>(<span class="type"><a href="qicon.html">QIcon</a></span><span class="operator">::</span>fromTheme(<span class="string">&quot;document-print&quot;</span><span class="operator">,</span> <span class="type"><a href="qicon.html">QIcon</a></span>(rsrcPath <span class="operator">+</span> <span class="string">&quot;/fileprint.png&quot;</span>))<span class="operator">,</span>
                     tr(<span class="string">&quot;&amp;Print...&quot;</span>)<span class="operator">,</span> <span class="keyword">this</span>);
     a<span class="operator">-</span><span class="operator">&gt;</span>setPriority(<span class="type"><a href="qaction.html">QAction</a></span><span class="operator">::</span>LowPriority);
     a<span class="operator">-</span><span class="operator">&gt;</span>setShortcut(<span class="type"><a href="qkeysequence.html">QKeySequence</a></span><span class="operator">::</span>Print);
     connect(a<span class="operator">,</span> SIGNAL(triggered())<span class="operator">,</span> <span class="keyword">this</span><span class="operator">,</span> SLOT(filePrint()));
     tb<span class="operator">-</span><span class="operator">&gt;</span>addAction(a);
     menu<span class="operator">-</span><span class="operator">&gt;</span>addAction(a);

     a <span class="operator">=</span> <span class="keyword">new</span> <span class="type"><a href="qaction.html">QAction</a></span>(<span class="type"><a href="qicon.html">QIcon</a></span><span class="operator">::</span>fromTheme(<span class="string">&quot;fileprint&quot;</span><span class="operator">,</span> <span class="type"><a href="qicon.html">QIcon</a></span>(rsrcPath <span class="operator">+</span> <span class="string">&quot;/fileprint.png&quot;</span>))<span class="operator">,</span>
                     tr(<span class="string">&quot;Print Preview...&quot;</span>)<span class="operator">,</span> <span class="keyword">this</span>);
     connect(a<span class="operator">,</span> SIGNAL(triggered())<span class="operator">,</span> <span class="keyword">this</span><span class="operator">,</span> SLOT(filePrintPreview()));
     menu<span class="operator">-</span><span class="operator">&gt;</span>addAction(a);

     a <span class="operator">=</span> <span class="keyword">new</span> <span class="type"><a href="qaction.html">QAction</a></span>(<span class="type"><a href="qicon.html">QIcon</a></span><span class="operator">::</span>fromTheme(<span class="string">&quot;exportpdf&quot;</span><span class="operator">,</span> <span class="type"><a href="qicon.html">QIcon</a></span>(rsrcPath <span class="operator">+</span> <span class="string">&quot;/exportpdf.png&quot;</span>))<span class="operator">,</span>
     tr(<span class="string">&quot;&amp;Export PDF...&quot;</span>)<span class="operator">,</span> <span class="keyword">this</span>);
     a<span class="operator">-</span><span class="operator">&gt;</span>setPriority(<span class="type"><a href="qaction.html">QAction</a></span><span class="operator">::</span>LowPriority);
     a<span class="operator">-</span><span class="operator">&gt;</span>setShortcut(<span class="type"><a href="qt.html">Qt</a></span><span class="operator">::</span>CTRL <span class="operator">+</span> <span class="type"><a href="qt.html">Qt</a></span><span class="operator">::</span>Key_D);
     connect(a<span class="operator">,</span> SIGNAL(triggered())<span class="operator">,</span> <span class="keyword">this</span><span class="operator">,</span> SLOT(filePrintPdf()));
     tb<span class="operator">-</span><span class="operator">&gt;</span>addAction(a);
     menu<span class="operator">-</span><span class="operator">&gt;</span>addAction(a);

     menu<span class="operator">-</span><span class="operator">&gt;</span>addSeparator();
 <span class="preprocessor">#endif</span>

     a <span class="operator">=</span> <span class="keyword">new</span> <span class="type"><a href="qaction.html">QAction</a></span>(tr(<span class="string">&quot;&amp;Quit&quot;</span>)<span class="operator">,</span> <span class="keyword">this</span>);
     a<span class="operator">-</span><span class="operator">&gt;</span>setShortcut(<span class="type"><a href="qt.html">Qt</a></span><span class="operator">::</span>CTRL <span class="operator">+</span> <span class="type"><a href="qt.html">Qt</a></span><span class="operator">::</span>Key_Q);
     connect(a<span class="operator">,</span> SIGNAL(triggered())<span class="operator">,</span> <span class="keyword">this</span><span class="operator">,</span> SLOT(close()));
     menu<span class="operator">-</span><span class="operator">&gt;</span>addAction(a);
 }

 <span class="type">void</span> TextEdit<span class="operator">::</span>setupEditActions()
 {
     <span class="type"><a href="qtoolbar.html">QToolBar</a></span> <span class="operator">*</span>tb <span class="operator">=</span> <span class="keyword">new</span> <span class="type"><a href="qtoolbar.html">QToolBar</a></span>(<span class="keyword">this</span>);
     tb<span class="operator">-</span><span class="operator">&gt;</span>setWindowTitle(tr(<span class="string">&quot;Edit Actions&quot;</span>));
     addToolBar(tb);
     <span class="type"><a href="qmenu.html">QMenu</a></span> <span class="operator">*</span>menu <span class="operator">=</span> <span class="keyword">new</span> <span class="type"><a href="qmenu.html">QMenu</a></span>(tr(<span class="string">&quot;&amp;Edit&quot;</span>)<span class="operator">,</span> <span class="keyword">this</span>);
     menuBar()<span class="operator">-</span><span class="operator">&gt;</span>addMenu(menu);

     <span class="type"><a href="qaction.html">QAction</a></span> <span class="operator">*</span>a;
     a <span class="operator">=</span> actionUndo <span class="operator">=</span> <span class="keyword">new</span> <span class="type"><a href="qaction.html">QAction</a></span>(<span class="type"><a href="qicon.html">QIcon</a></span><span class="operator">::</span>fromTheme(<span class="string">&quot;edit-undo&quot;</span><span class="operator">,</span> <span class="type"><a href="qicon.html">QIcon</a></span>(rsrcPath <span class="operator">+</span> <span class="string">&quot;/editundo.png&quot;</span>))<span class="operator">,</span>
                                               tr(<span class="string">&quot;&amp;Undo&quot;</span>)<span class="operator">,</span> <span class="keyword">this</span>);
     a<span class="operator">-</span><span class="operator">&gt;</span>setShortcut(<span class="type"><a href="qkeysequence.html">QKeySequence</a></span><span class="operator">::</span>Undo);
     tb<span class="operator">-</span><span class="operator">&gt;</span>addAction(a);
     menu<span class="operator">-</span><span class="operator">&gt;</span>addAction(a);
     a <span class="operator">=</span> actionRedo <span class="operator">=</span> <span class="keyword">new</span> <span class="type"><a href="qaction.html">QAction</a></span>(<span class="type"><a href="qicon.html">QIcon</a></span><span class="operator">::</span>fromTheme(<span class="string">&quot;edit-redo&quot;</span><span class="operator">,</span> <span class="type"><a href="qicon.html">QIcon</a></span>(rsrcPath <span class="operator">+</span> <span class="string">&quot;/editredo.png&quot;</span>))<span class="operator">,</span>
                                               tr(<span class="string">&quot;&amp;Redo&quot;</span>)<span class="operator">,</span> <span class="keyword">this</span>);
     a<span class="operator">-</span><span class="operator">&gt;</span>setPriority(<span class="type"><a href="qaction.html">QAction</a></span><span class="operator">::</span>LowPriority);
     a<span class="operator">-</span><span class="operator">&gt;</span>setShortcut(<span class="type"><a href="qkeysequence.html">QKeySequence</a></span><span class="operator">::</span>Redo);
     tb<span class="operator">-</span><span class="operator">&gt;</span>addAction(a);
     menu<span class="operator">-</span><span class="operator">&gt;</span>addAction(a);
     menu<span class="operator">-</span><span class="operator">&gt;</span>addSeparator();
     a <span class="operator">=</span> actionCut <span class="operator">=</span> <span class="keyword">new</span> <span class="type"><a href="qaction.html">QAction</a></span>(<span class="type"><a href="qicon.html">QIcon</a></span><span class="operator">::</span>fromTheme(<span class="string">&quot;edit-cut&quot;</span><span class="operator">,</span> <span class="type"><a href="qicon.html">QIcon</a></span>(rsrcPath <span class="operator">+</span> <span class="string">&quot;/editcut.png&quot;</span>))<span class="operator">,</span>
                                              tr(<span class="string">&quot;Cu&amp;t&quot;</span>)<span class="operator">,</span> <span class="keyword">this</span>);
     a<span class="operator">-</span><span class="operator">&gt;</span>setPriority(<span class="type"><a href="qaction.html">QAction</a></span><span class="operator">::</span>LowPriority);
     a<span class="operator">-</span><span class="operator">&gt;</span>setShortcut(<span class="type"><a href="qkeysequence.html">QKeySequence</a></span><span class="operator">::</span>Cut);
     tb<span class="operator">-</span><span class="operator">&gt;</span>addAction(a);
     menu<span class="operator">-</span><span class="operator">&gt;</span>addAction(a);
     a <span class="operator">=</span> actionCopy <span class="operator">=</span> <span class="keyword">new</span> <span class="type"><a href="qaction.html">QAction</a></span>(<span class="type"><a href="qicon.html">QIcon</a></span><span class="operator">::</span>fromTheme(<span class="string">&quot;edit-copy&quot;</span><span class="operator">,</span> <span class="type"><a href="qicon.html">QIcon</a></span>(rsrcPath <span class="operator">+</span> <span class="string">&quot;/editcopy.png&quot;</span>))<span class="operator">,</span>
                                  tr(<span class="string">&quot;&amp;Copy&quot;</span>)<span class="operator">,</span> <span class="keyword">this</span>);
     a<span class="operator">-</span><span class="operator">&gt;</span>setPriority(<span class="type"><a href="qaction.html">QAction</a></span><span class="operator">::</span>LowPriority);
     a<span class="operator">-</span><span class="operator">&gt;</span>setShortcut(<span class="type"><a href="qkeysequence.html">QKeySequence</a></span><span class="operator">::</span>Copy);
     tb<span class="operator">-</span><span class="operator">&gt;</span>addAction(a);
     menu<span class="operator">-</span><span class="operator">&gt;</span>addAction(a);
     a <span class="operator">=</span> actionPaste <span class="operator">=</span> <span class="keyword">new</span> <span class="type"><a href="qaction.html">QAction</a></span>(<span class="type"><a href="qicon.html">QIcon</a></span><span class="operator">::</span>fromTheme(<span class="string">&quot;edit-paste&quot;</span><span class="operator">,</span> <span class="type"><a href="qicon.html">QIcon</a></span>(rsrcPath <span class="operator">+</span> <span class="string">&quot;/editpaste.png&quot;</span>))<span class="operator">,</span>
                                   tr(<span class="string">&quot;&amp;Paste&quot;</span>)<span class="operator">,</span> <span class="keyword">this</span>);
     a<span class="operator">-</span><span class="operator">&gt;</span>setPriority(<span class="type"><a href="qaction.html">QAction</a></span><span class="operator">::</span>LowPriority);
     a<span class="operator">-</span><span class="operator">&gt;</span>setShortcut(<span class="type"><a href="qkeysequence.html">QKeySequence</a></span><span class="operator">::</span>Paste);
     tb<span class="operator">-</span><span class="operator">&gt;</span>addAction(a);
     menu<span class="operator">-</span><span class="operator">&gt;</span>addAction(a);
 <span class="preprocessor">#ifndef QT_NO_CLIPBOARD</span>
     <span class="keyword">if</span> (<span class="keyword">const</span> <span class="type"><a href="qmimedata.html">QMimeData</a></span> <span class="operator">*</span>md <span class="operator">=</span> <span class="type"><a href="qapplication.html">QApplication</a></span><span class="operator">::</span>clipboard()<span class="operator">-</span><span class="operator">&gt;</span>mimeData())
         actionPaste<span class="operator">-</span><span class="operator">&gt;</span>setEnabled(md<span class="operator">-</span><span class="operator">&gt;</span>hasText());
 <span class="preprocessor">#endif</span>
 }

 <span class="type">void</span> TextEdit<span class="operator">::</span>setupTextActions()
 {
     <span class="type"><a href="qtoolbar.html">QToolBar</a></span> <span class="operator">*</span>tb <span class="operator">=</span> <span class="keyword">new</span> <span class="type"><a href="qtoolbar.html">QToolBar</a></span>(<span class="keyword">this</span>);
     tb<span class="operator">-</span><span class="operator">&gt;</span>setWindowTitle(tr(<span class="string">&quot;Format Actions&quot;</span>));
     addToolBar(tb);

     <span class="type"><a href="qmenu.html">QMenu</a></span> <span class="operator">*</span>menu <span class="operator">=</span> <span class="keyword">new</span> <span class="type"><a href="qmenu.html">QMenu</a></span>(tr(<span class="string">&quot;F&amp;ormat&quot;</span>)<span class="operator">,</span> <span class="keyword">this</span>);
     menuBar()<span class="operator">-</span><span class="operator">&gt;</span>addMenu(menu);

     actionTextBold <span class="operator">=</span> <span class="keyword">new</span> <span class="type"><a href="qaction.html">QAction</a></span>(<span class="type"><a href="qicon.html">QIcon</a></span><span class="operator">::</span>fromTheme(<span class="string">&quot;format-text-bold&quot;</span><span class="operator">,</span> <span class="type"><a href="qicon.html">QIcon</a></span>(rsrcPath <span class="operator">+</span> <span class="string">&quot;/textbold.png&quot;</span>))<span class="operator">,</span>
                                  tr(<span class="string">&quot;&amp;Bold&quot;</span>)<span class="operator">,</span> <span class="keyword">this</span>);
     actionTextBold<span class="operator">-</span><span class="operator">&gt;</span>setShortcut(<span class="type"><a href="qt.html">Qt</a></span><span class="operator">::</span>CTRL <span class="operator">+</span> <span class="type"><a href="qt.html">Qt</a></span><span class="operator">::</span>Key_B);
     actionTextBold<span class="operator">-</span><span class="operator">&gt;</span>setPriority(<span class="type"><a href="qaction.html">QAction</a></span><span class="operator">::</span>LowPriority);
         <span class="type"><a href="qfont.html">QFont</a></span> bold;
     bold<span class="operator">.</span>setBold(<span class="keyword">true</span>);
     actionTextBold<span class="operator">-</span><span class="operator">&gt;</span>setFont(bold);
     connect(actionTextBold<span class="operator">,</span> SIGNAL(triggered())<span class="operator">,</span> <span class="keyword">this</span><span class="operator">,</span> SLOT(textBold()));
     tb<span class="operator">-</span><span class="operator">&gt;</span>addAction(actionTextBold);
     menu<span class="operator">-</span><span class="operator">&gt;</span>addAction(actionTextBold);
     actionTextBold<span class="operator">-</span><span class="operator">&gt;</span>setCheckable(<span class="keyword">true</span>);

     actionTextItalic <span class="operator">=</span> <span class="keyword">new</span> <span class="type"><a href="qaction.html">QAction</a></span>(<span class="type"><a href="qicon.html">QIcon</a></span><span class="operator">::</span>fromTheme(<span class="string">&quot;format-text-italic&quot;</span><span class="operator">,</span> <span class="type"><a href="qicon.html">QIcon</a></span>(rsrcPath <span class="operator">+</span> <span class="string">&quot;/textitalic.png&quot;</span>))<span class="operator">,</span>
                                    tr(<span class="string">&quot;&amp;Italic&quot;</span>)<span class="operator">,</span> <span class="keyword">this</span>);
     actionTextItalic<span class="operator">-</span><span class="operator">&gt;</span>setPriority(<span class="type"><a href="qaction.html">QAction</a></span><span class="operator">::</span>LowPriority);
     actionTextItalic<span class="operator">-</span><span class="operator">&gt;</span>setShortcut(<span class="type"><a href="qt.html">Qt</a></span><span class="operator">::</span>CTRL <span class="operator">+</span> <span class="type"><a href="qt.html">Qt</a></span><span class="operator">::</span>Key_I);
     <span class="type"><a href="qfont.html">QFont</a></span> italic;
     italic<span class="operator">.</span>setItalic(<span class="keyword">true</span>);
     actionTextItalic<span class="operator">-</span><span class="operator">&gt;</span>setFont(italic);
     connect(actionTextItalic<span class="operator">,</span> SIGNAL(triggered())<span class="operator">,</span> <span class="keyword">this</span><span class="operator">,</span> SLOT(textItalic()));
     tb<span class="operator">-</span><span class="operator">&gt;</span>addAction(actionTextItalic);
     menu<span class="operator">-</span><span class="operator">&gt;</span>addAction(actionTextItalic);
     actionTextItalic<span class="operator">-</span><span class="operator">&gt;</span>setCheckable(<span class="keyword">true</span>);

     actionTextUnderline <span class="operator">=</span> <span class="keyword">new</span> <span class="type"><a href="qaction.html">QAction</a></span>(<span class="type"><a href="qicon.html">QIcon</a></span><span class="operator">::</span>fromTheme(<span class="string">&quot;format-text-underline&quot;</span><span class="operator">,</span> <span class="type"><a href="qicon.html">QIcon</a></span>(rsrcPath <span class="operator">+</span> <span class="string">&quot;/textunder.png&quot;</span>))<span class="operator">,</span>
                                       tr(<span class="string">&quot;&amp;Underline&quot;</span>)<span class="operator">,</span> <span class="keyword">this</span>);
     actionTextUnderline<span class="operator">-</span><span class="operator">&gt;</span>setShortcut(<span class="type"><a href="qt.html">Qt</a></span><span class="operator">::</span>CTRL <span class="operator">+</span> <span class="type"><a href="qt.html">Qt</a></span><span class="operator">::</span>Key_U);
     actionTextUnderline<span class="operator">-</span><span class="operator">&gt;</span>setPriority(<span class="type"><a href="qaction.html">QAction</a></span><span class="operator">::</span>LowPriority);
     <span class="type"><a href="qfont.html">QFont</a></span> underline;
     underline<span class="operator">.</span>setUnderline(<span class="keyword">true</span>);
     actionTextUnderline<span class="operator">-</span><span class="operator">&gt;</span>setFont(underline);
     connect(actionTextUnderline<span class="operator">,</span> SIGNAL(triggered())<span class="operator">,</span> <span class="keyword">this</span><span class="operator">,</span> SLOT(textUnderline()));
     tb<span class="operator">-</span><span class="operator">&gt;</span>addAction(actionTextUnderline);
     menu<span class="operator">-</span><span class="operator">&gt;</span>addAction(actionTextUnderline);
     actionTextUnderline<span class="operator">-</span><span class="operator">&gt;</span>setCheckable(<span class="keyword">true</span>);

     menu<span class="operator">-</span><span class="operator">&gt;</span>addSeparator();

     <span class="type"><a href="qactiongroup.html">QActionGroup</a></span> <span class="operator">*</span>grp <span class="operator">=</span> <span class="keyword">new</span> <span class="type"><a href="qactiongroup.html">QActionGroup</a></span>(<span class="keyword">this</span>);
     connect(grp<span class="operator">,</span> SIGNAL(triggered(<span class="type"><a href="qaction.html">QAction</a></span><span class="operator">*</span>))<span class="operator">,</span> <span class="keyword">this</span><span class="operator">,</span> SLOT(textAlign(<span class="type"><a href="qaction.html">QAction</a></span><span class="operator">*</span>)));

     <span class="comment">// Make sure the alignLeft  is always left of the alignRight</span>
     <span class="keyword">if</span> (<span class="type"><a href="qapplication.html">QApplication</a></span><span class="operator">::</span>isLeftToRight()) {
         actionAlignLeft <span class="operator">=</span> <span class="keyword">new</span> <span class="type"><a href="qaction.html">QAction</a></span>(<span class="type"><a href="qicon.html">QIcon</a></span><span class="operator">::</span>fromTheme(<span class="string">&quot;format-justify-left&quot;</span><span class="operator">,</span> <span class="type"><a href="qicon.html">QIcon</a></span>(rsrcPath <span class="operator">+</span> <span class="string">&quot;/textleft.png&quot;</span>))<span class="operator">,</span>
                                       tr(<span class="string">&quot;&amp;Left&quot;</span>)<span class="operator">,</span> grp);
         actionAlignCenter <span class="operator">=</span> <span class="keyword">new</span> <span class="type"><a href="qaction.html">QAction</a></span>(<span class="type"><a href="qicon.html">QIcon</a></span><span class="operator">::</span>fromTheme(<span class="string">&quot;format-justify-center&quot;</span><span class="operator">,</span> <span class="type"><a href="qicon.html">QIcon</a></span>(rsrcPath <span class="operator">+</span> <span class="string">&quot;/textcenter.png&quot;</span>))<span class="operator">,</span> tr(<span class="string">&quot;C&amp;enter&quot;</span>)<span class="operator">,</span> grp);
         actionAlignRight <span class="operator">=</span> <span class="keyword">new</span> <span class="type"><a href="qaction.html">QAction</a></span>(<span class="type"><a href="qicon.html">QIcon</a></span><span class="operator">::</span>fromTheme(<span class="string">&quot;format-justify-right&quot;</span><span class="operator">,</span> <span class="type"><a href="qicon.html">QIcon</a></span>(rsrcPath <span class="operator">+</span> <span class="string">&quot;/textright.png&quot;</span>))<span class="operator">,</span> tr(<span class="string">&quot;&amp;Right&quot;</span>)<span class="operator">,</span> grp);
     } <span class="keyword">else</span> {
         actionAlignRight <span class="operator">=</span> <span class="keyword">new</span> <span class="type"><a href="qaction.html">QAction</a></span>(<span class="type"><a href="qicon.html">QIcon</a></span><span class="operator">::</span>fromTheme(<span class="string">&quot;format-justify-right&quot;</span><span class="operator">,</span> <span class="type"><a href="qicon.html">QIcon</a></span>(rsrcPath <span class="operator">+</span> <span class="string">&quot;/textright.png&quot;</span>))<span class="operator">,</span> tr(<span class="string">&quot;&amp;Right&quot;</span>)<span class="operator">,</span> grp);
         actionAlignCenter <span class="operator">=</span> <span class="keyword">new</span> <span class="type"><a href="qaction.html">QAction</a></span>(<span class="type"><a href="qicon.html">QIcon</a></span><span class="operator">::</span>fromTheme(<span class="string">&quot;format-justify-center&quot;</span><span class="operator">,</span> <span class="type"><a href="qicon.html">QIcon</a></span>(rsrcPath <span class="operator">+</span> <span class="string">&quot;/textcenter.png&quot;</span>))<span class="operator">,</span> tr(<span class="string">&quot;C&amp;enter&quot;</span>)<span class="operator">,</span> grp);
         actionAlignLeft <span class="operator">=</span> <span class="keyword">new</span> <span class="type"><a href="qaction.html">QAction</a></span>(<span class="type"><a href="qicon.html">QIcon</a></span><span class="operator">::</span>fromTheme(<span class="string">&quot;format-justify-left&quot;</span><span class="operator">,</span> <span class="type"><a href="qicon.html">QIcon</a></span>(rsrcPath <span class="operator">+</span> <span class="string">&quot;/textleft.png&quot;</span>))<span class="operator">,</span> tr(<span class="string">&quot;&amp;Left&quot;</span>)<span class="operator">,</span> grp);
     }
     actionAlignJustify <span class="operator">=</span> <span class="keyword">new</span> <span class="type"><a href="qaction.html">QAction</a></span>(<span class="type"><a href="qicon.html">QIcon</a></span><span class="operator">::</span>fromTheme(<span class="string">&quot;format-justify-fill&quot;</span><span class="operator">,</span> <span class="type"><a href="qicon.html">QIcon</a></span>(rsrcPath <span class="operator">+</span> <span class="string">&quot;/textjustify.png&quot;</span>))<span class="operator">,</span> tr(<span class="string">&quot;&amp;Justify&quot;</span>)<span class="operator">,</span> grp);

     actionAlignLeft<span class="operator">-</span><span class="operator">&gt;</span>setShortcut(<span class="type"><a href="qt.html">Qt</a></span><span class="operator">::</span>CTRL <span class="operator">+</span> <span class="type"><a href="qt.html">Qt</a></span><span class="operator">::</span>Key_L);
     actionAlignLeft<span class="operator">-</span><span class="operator">&gt;</span>setCheckable(<span class="keyword">true</span>);
     actionAlignLeft<span class="operator">-</span><span class="operator">&gt;</span>setPriority(<span class="type"><a href="qaction.html">QAction</a></span><span class="operator">::</span>LowPriority);
     actionAlignCenter<span class="operator">-</span><span class="operator">&gt;</span>setShortcut(<span class="type"><a href="qt.html">Qt</a></span><span class="operator">::</span>CTRL <span class="operator">+</span> <span class="type"><a href="qt.html">Qt</a></span><span class="operator">::</span>Key_E);
     actionAlignCenter<span class="operator">-</span><span class="operator">&gt;</span>setCheckable(<span class="keyword">true</span>);
     actionAlignCenter<span class="operator">-</span><span class="operator">&gt;</span>setPriority(<span class="type"><a href="qaction.html">QAction</a></span><span class="operator">::</span>LowPriority);
     actionAlignRight<span class="operator">-</span><span class="operator">&gt;</span>setShortcut(<span class="type"><a href="qt.html">Qt</a></span><span class="operator">::</span>CTRL <span class="operator">+</span> <span class="type"><a href="qt.html">Qt</a></span><span class="operator">::</span>Key_R);
     actionAlignRight<span class="operator">-</span><span class="operator">&gt;</span>setCheckable(<span class="keyword">true</span>);
     actionAlignRight<span class="operator">-</span><span class="operator">&gt;</span>setPriority(<span class="type"><a href="qaction.html">QAction</a></span><span class="operator">::</span>LowPriority);
     actionAlignJustify<span class="operator">-</span><span class="operator">&gt;</span>setShortcut(<span class="type"><a href="qt.html">Qt</a></span><span class="operator">::</span>CTRL <span class="operator">+</span> <span class="type"><a href="qt.html">Qt</a></span><span class="operator">::</span>Key_J);
     actionAlignJustify<span class="operator">-</span><span class="operator">&gt;</span>setCheckable(<span class="keyword">true</span>);
     actionAlignJustify<span class="operator">-</span><span class="operator">&gt;</span>setPriority(<span class="type"><a href="qaction.html">QAction</a></span><span class="operator">::</span>LowPriority);

     tb<span class="operator">-</span><span class="operator">&gt;</span>addActions(grp<span class="operator">-</span><span class="operator">&gt;</span>actions());
     menu<span class="operator">-</span><span class="operator">&gt;</span>addActions(grp<span class="operator">-</span><span class="operator">&gt;</span>actions());

     menu<span class="operator">-</span><span class="operator">&gt;</span>addSeparator();

     <span class="type"><a href="qpixmap.html">QPixmap</a></span> pix(<span class="number">16</span><span class="operator">,</span> <span class="number">16</span>);
     pix<span class="operator">.</span>fill(<span class="type"><a href="qt.html">Qt</a></span><span class="operator">::</span>black);
     actionTextColor <span class="operator">=</span> <span class="keyword">new</span> <span class="type"><a href="qaction.html">QAction</a></span>(pix<span class="operator">,</span> tr(<span class="string">&quot;&amp;Color...&quot;</span>)<span class="operator">,</span> <span class="keyword">this</span>);
     connect(actionTextColor<span class="operator">,</span> SIGNAL(triggered())<span class="operator">,</span> <span class="keyword">this</span><span class="operator">,</span> SLOT(textColor()));
     tb<span class="operator">-</span><span class="operator">&gt;</span>addAction(actionTextColor);
     menu<span class="operator">-</span><span class="operator">&gt;</span>addAction(actionTextColor);

     tb <span class="operator">=</span> <span class="keyword">new</span> <span class="type"><a href="qtoolbar.html">QToolBar</a></span>(<span class="keyword">this</span>);
     tb<span class="operator">-</span><span class="operator">&gt;</span>setAllowedAreas(<span class="type"><a href="qt.html">Qt</a></span><span class="operator">::</span>TopToolBarArea <span class="operator">|</span> <span class="type"><a href="qt.html">Qt</a></span><span class="operator">::</span>BottomToolBarArea);
     tb<span class="operator">-</span><span class="operator">&gt;</span>setWindowTitle(tr(<span class="string">&quot;Format Actions&quot;</span>));
     addToolBarBreak(<span class="type"><a href="qt.html">Qt</a></span><span class="operator">::</span>TopToolBarArea);
     addToolBar(tb);

     comboStyle <span class="operator">=</span> <span class="keyword">new</span> <span class="type"><a href="qcombobox.html">QComboBox</a></span>(tb);
     tb<span class="operator">-</span><span class="operator">&gt;</span>addWidget(comboStyle);
     comboStyle<span class="operator">-</span><span class="operator">&gt;</span>addItem(<span class="string">&quot;Standard&quot;</span>);
     comboStyle<span class="operator">-</span><span class="operator">&gt;</span>addItem(<span class="string">&quot;Bullet List (Disc)&quot;</span>);
     comboStyle<span class="operator">-</span><span class="operator">&gt;</span>addItem(<span class="string">&quot;Bullet List (Circle)&quot;</span>);
     comboStyle<span class="operator">-</span><span class="operator">&gt;</span>addItem(<span class="string">&quot;Bullet List (Square)&quot;</span>);
     comboStyle<span class="operator">-</span><span class="operator">&gt;</span>addItem(<span class="string">&quot;Ordered List (Decimal)&quot;</span>);
     comboStyle<span class="operator">-</span><span class="operator">&gt;</span>addItem(<span class="string">&quot;Ordered List (Alpha lower)&quot;</span>);
     comboStyle<span class="operator">-</span><span class="operator">&gt;</span>addItem(<span class="string">&quot;Ordered List (Alpha upper)&quot;</span>);
     comboStyle<span class="operator">-</span><span class="operator">&gt;</span>addItem(<span class="string">&quot;Ordered List (Roman lower)&quot;</span>);
     comboStyle<span class="operator">-</span><span class="operator">&gt;</span>addItem(<span class="string">&quot;Ordered List (Roman upper)&quot;</span>);
     connect(comboStyle<span class="operator">,</span> SIGNAL(activated(<span class="type">int</span>))<span class="operator">,</span>
             <span class="keyword">this</span><span class="operator">,</span> SLOT(textStyle(<span class="type">int</span>)));

     comboFont <span class="operator">=</span> <span class="keyword">new</span> <span class="type"><a href="qfontcombobox.html">QFontComboBox</a></span>(tb);
     tb<span class="operator">-</span><span class="operator">&gt;</span>addWidget(comboFont);
     connect(comboFont<span class="operator">,</span> SIGNAL(activated(<span class="type"><a href="qstring.html">QString</a></span>))<span class="operator">,</span>
             <span class="keyword">this</span><span class="operator">,</span> SLOT(textFamily(<span class="type"><a href="qstring.html">QString</a></span>)));

     comboSize <span class="operator">=</span> <span class="keyword">new</span> <span class="type"><a href="qcombobox.html">QComboBox</a></span>(tb);
     comboSize<span class="operator">-</span><span class="operator">&gt;</span>setObjectName(<span class="string">&quot;comboSize&quot;</span>);
     tb<span class="operator">-</span><span class="operator">&gt;</span>addWidget(comboSize);
     comboSize<span class="operator">-</span><span class="operator">&gt;</span>setEditable(<span class="keyword">true</span>);

     <span class="type"><a href="qfontdatabase.html">QFontDatabase</a></span> db;
     foreach(<span class="type">int</span> size<span class="operator">,</span> db<span class="operator">.</span>standardSizes())
         comboSize<span class="operator">-</span><span class="operator">&gt;</span>addItem(<span class="type"><a href="qstring.html">QString</a></span><span class="operator">::</span>number(size));

     connect(comboSize<span class="operator">,</span> SIGNAL(activated(<span class="type"><a href="qstring.html">QString</a></span>))<span class="operator">,</span>
             <span class="keyword">this</span><span class="operator">,</span> SLOT(textSize(<span class="type"><a href="qstring.html">QString</a></span>)));
     comboSize<span class="operator">-</span><span class="operator">&gt;</span>setCurrentIndex(comboSize<span class="operator">-</span><span class="operator">&gt;</span>findText(<span class="type"><a href="qstring.html">QString</a></span><span class="operator">::</span>number(<span class="type"><a href="qapplication.html">QApplication</a></span><span class="operator">::</span>font()
                                                                    <span class="operator">.</span>pointSize())));
 }

 <span class="type">bool</span> TextEdit<span class="operator">::</span>load(<span class="keyword">const</span> <span class="type"><a href="qstring.html">QString</a></span> <span class="operator">&amp;</span>f)
 {
     <span class="keyword">if</span> (<span class="operator">!</span><span class="type"><a href="qfile.html">QFile</a></span><span class="operator">::</span>exists(f))
         <span class="keyword">return</span> <span class="keyword">false</span>;
     <span class="type"><a href="qfile.html">QFile</a></span> file(f);
     <span class="keyword">if</span> (<span class="operator">!</span>file<span class="operator">.</span>open(<span class="type"><a href="qfile.html">QFile</a></span><span class="operator">::</span>ReadOnly))
         <span class="keyword">return</span> <span class="keyword">false</span>;

     <span class="type"><a href="qbytearray.html">QByteArray</a></span> data <span class="operator">=</span> file<span class="operator">.</span>readAll();
     <span class="type"><a href="qtextcodec.html">QTextCodec</a></span> <span class="operator">*</span>codec <span class="operator">=</span> <span class="type"><a href="qt.html">Qt</a></span><span class="operator">::</span>codecForHtml(data);
     <span class="type"><a href="qstring.html">QString</a></span> str <span class="operator">=</span> codec<span class="operator">-</span><span class="operator">&gt;</span>toUnicode(data);
     <span class="keyword">if</span> (<span class="type"><a href="qt.html">Qt</a></span><span class="operator">::</span>mightBeRichText(str)) {
         textEdit<span class="operator">-</span><span class="operator">&gt;</span>setHtml(str);
     } <span class="keyword">else</span> {
         str <span class="operator">=</span> <span class="type"><a href="qstring.html">QString</a></span><span class="operator">::</span>fromLocal8Bit(data);
         textEdit<span class="operator">-</span><span class="operator">&gt;</span>setPlainText(str);
     }

     setCurrentFileName(f);
     <span class="keyword">return</span> <span class="keyword">true</span>;
 }

 <span class="type">bool</span> TextEdit<span class="operator">::</span>maybeSave()
 {
     <span class="keyword">if</span> (<span class="operator">!</span>textEdit<span class="operator">-</span><span class="operator">&gt;</span>document()<span class="operator">-</span><span class="operator">&gt;</span>isModified())
         <span class="keyword">return</span> <span class="keyword">true</span>;
     <span class="keyword">if</span> (fileName<span class="operator">.</span>startsWith(QLatin1String(<span class="string">&quot;:/&quot;</span>)))
         <span class="keyword">return</span> <span class="keyword">true</span>;
     <span class="type"><a href="qmessagebox.html">QMessageBox</a></span><span class="operator">::</span>StandardButton ret;
     ret <span class="operator">=</span> <span class="type"><a href="qmessagebox.html">QMessageBox</a></span><span class="operator">::</span>warning(<span class="keyword">this</span><span class="operator">,</span> tr(<span class="string">&quot;Application&quot;</span>)<span class="operator">,</span>
                                tr(<span class="string">&quot;The document has been modified.\n&quot;</span>
                                   <span class="string">&quot;Do you want to save your changes?&quot;</span>)<span class="operator">,</span>
                                <span class="type"><a href="qmessagebox.html">QMessageBox</a></span><span class="operator">::</span>Save <span class="operator">|</span> <span class="type"><a href="qmessagebox.html">QMessageBox</a></span><span class="operator">::</span>Discard
                                <span class="operator">|</span> <span class="type"><a href="qmessagebox.html">QMessageBox</a></span><span class="operator">::</span>Cancel);
     <span class="keyword">if</span> (ret <span class="operator">=</span><span class="operator">=</span> <span class="type"><a href="qmessagebox.html">QMessageBox</a></span><span class="operator">::</span>Save)
         <span class="keyword">return</span> fileSave();
     <span class="keyword">else</span> <span class="keyword">if</span> (ret <span class="operator">=</span><span class="operator">=</span> <span class="type"><a href="qmessagebox.html">QMessageBox</a></span><span class="operator">::</span>Cancel)
         <span class="keyword">return</span> <span class="keyword">false</span>;
     <span class="keyword">return</span> <span class="keyword">true</span>;
 }

 <span class="type">void</span> TextEdit<span class="operator">::</span>setCurrentFileName(<span class="keyword">const</span> <span class="type"><a href="qstring.html">QString</a></span> <span class="operator">&amp;</span>fileName)
 {
     <span class="keyword">this</span><span class="operator">-</span><span class="operator">&gt;</span>fileName <span class="operator">=</span> fileName;
     textEdit<span class="operator">-</span><span class="operator">&gt;</span>document()<span class="operator">-</span><span class="operator">&gt;</span>setModified(<span class="keyword">false</span>);

     <span class="type"><a href="qstring.html">QString</a></span> shownName;
     <span class="keyword">if</span> (fileName<span class="operator">.</span>isEmpty())
         shownName <span class="operator">=</span> <span class="string">&quot;untitled.txt&quot;</span>;
     <span class="keyword">else</span>
         shownName <span class="operator">=</span> <span class="type"><a href="qfileinfo.html">QFileInfo</a></span>(fileName)<span class="operator">.</span>fileName();

     setWindowTitle(tr(<span class="string">&quot;%1[*] - %2&quot;</span>)<span class="operator">.</span>arg(shownName)<span class="operator">.</span>arg(tr(<span class="string">&quot;Rich Text&quot;</span>)));
     setWindowModified(<span class="keyword">false</span>);
 }

 <span class="type">void</span> TextEdit<span class="operator">::</span>fileNew()
 {
     <span class="keyword">if</span> (maybeSave()) {
         textEdit<span class="operator">-</span><span class="operator">&gt;</span>clear();
         setCurrentFileName(<span class="type"><a href="qstring.html">QString</a></span>());
     }
 }

 <span class="type">void</span> TextEdit<span class="operator">::</span>fileOpen()
 {
     <span class="type"><a href="qstring.html">QString</a></span> fn <span class="operator">=</span> <span class="type"><a href="qfiledialog.html">QFileDialog</a></span><span class="operator">::</span>getOpenFileName(<span class="keyword">this</span><span class="operator">,</span> tr(<span class="string">&quot;Open File...&quot;</span>)<span class="operator">,</span>
                                               <span class="type"><a href="qstring.html">QString</a></span>()<span class="operator">,</span> tr(<span class="string">&quot;HTML-Files (*.htm *.html);;All Files (*)&quot;</span>));
     <span class="keyword">if</span> (<span class="operator">!</span>fn<span class="operator">.</span>isEmpty())
         load(fn);
 }

 <span class="type">bool</span> TextEdit<span class="operator">::</span>fileSave()
 {
     <span class="keyword">if</span> (fileName<span class="operator">.</span>isEmpty())
         <span class="keyword">return</span> fileSaveAs();

     <span class="type"><a href="qtextdocumentwriter.html">QTextDocumentWriter</a></span> writer(fileName);
     <span class="type">bool</span> success <span class="operator">=</span> writer<span class="operator">.</span>write(textEdit<span class="operator">-</span><span class="operator">&gt;</span>document());
     <span class="keyword">if</span> (success)
         textEdit<span class="operator">-</span><span class="operator">&gt;</span>document()<span class="operator">-</span><span class="operator">&gt;</span>setModified(<span class="keyword">false</span>);
     <span class="keyword">return</span> success;
 }

 <span class="type">bool</span> TextEdit<span class="operator">::</span>fileSaveAs()
 {
     <span class="type"><a href="qstring.html">QString</a></span> fn <span class="operator">=</span> <span class="type"><a href="qfiledialog.html">QFileDialog</a></span><span class="operator">::</span>getSaveFileName(<span class="keyword">this</span><span class="operator">,</span> tr(<span class="string">&quot;Save as...&quot;</span>)<span class="operator">,</span>
                                               <span class="type"><a href="qstring.html">QString</a></span>()<span class="operator">,</span> tr(<span class="string">&quot;ODF files (*.odt);;HTML-Files (*.htm *.html);;All Files (*)&quot;</span>));
     <span class="keyword">if</span> (fn<span class="operator">.</span>isEmpty())
         <span class="keyword">return</span> <span class="keyword">false</span>;
     <span class="keyword">if</span> (<span class="operator">!</span> (fn<span class="operator">.</span>endsWith(<span class="string">&quot;.odt&quot;</span><span class="operator">,</span> <span class="type"><a href="qt.html">Qt</a></span><span class="operator">::</span>CaseInsensitive) <span class="operator">|</span><span class="operator">|</span> fn<span class="operator">.</span>endsWith(<span class="string">&quot;.htm&quot;</span><span class="operator">,</span> <span class="type"><a href="qt.html">Qt</a></span><span class="operator">::</span>CaseInsensitive) <span class="operator">|</span><span class="operator">|</span> fn<span class="operator">.</span>endsWith(<span class="string">&quot;.html&quot;</span><span class="operator">,</span> <span class="type"><a href="qt.html">Qt</a></span><span class="operator">::</span>CaseInsensitive)) )
         fn <span class="operator">+</span><span class="operator">=</span> <span class="string">&quot;.odt&quot;</span>; <span class="comment">// default</span>
     setCurrentFileName(fn);
     <span class="keyword">return</span> fileSave();
 }

 <span class="type">void</span> TextEdit<span class="operator">::</span>filePrint()
 {
 <span class="preprocessor">#ifndef QT_NO_PRINTER</span>
     <span class="type"><a href="qprinter.html">QPrinter</a></span> printer(<span class="type"><a href="qprinter.html">QPrinter</a></span><span class="operator">::</span>HighResolution);
     <span class="type"><a href="qprintdialog.html">QPrintDialog</a></span> <span class="operator">*</span>dlg <span class="operator">=</span> <span class="keyword">new</span> <span class="type"><a href="qprintdialog.html">QPrintDialog</a></span>(<span class="operator">&amp;</span>printer<span class="operator">,</span> <span class="keyword">this</span>);
     <span class="keyword">if</span> (textEdit<span class="operator">-</span><span class="operator">&gt;</span>textCursor()<span class="operator">.</span>hasSelection())
         dlg<span class="operator">-</span><span class="operator">&gt;</span>addEnabledOption(<span class="type"><a href="qabstractprintdialog.html">QAbstractPrintDialog</a></span><span class="operator">::</span>PrintSelection);
     dlg<span class="operator">-</span><span class="operator">&gt;</span>setWindowTitle(tr(<span class="string">&quot;Print Document&quot;</span>));
     <span class="keyword">if</span> (dlg<span class="operator">-</span><span class="operator">&gt;</span>exec() <span class="operator">=</span><span class="operator">=</span> <span class="type"><a href="qdialog.html">QDialog</a></span><span class="operator">::</span>Accepted) {
         textEdit<span class="operator">-</span><span class="operator">&gt;</span>print(<span class="operator">&amp;</span>printer);
     }
     <span class="keyword">delete</span> dlg;
 <span class="preprocessor">#endif</span>
 }

 <span class="type">void</span> TextEdit<span class="operator">::</span>filePrintPreview()
 {
 <span class="preprocessor">#ifndef QT_NO_PRINTER</span>
     <span class="type"><a href="qprinter.html">QPrinter</a></span> printer(<span class="type"><a href="qprinter.html">QPrinter</a></span><span class="operator">::</span>HighResolution);
     <span class="type"><a href="qprintpreviewdialog.html">QPrintPreviewDialog</a></span> preview(<span class="operator">&amp;</span>printer<span class="operator">,</span> <span class="keyword">this</span>);
     connect(<span class="operator">&amp;</span>preview<span class="operator">,</span> SIGNAL(paintRequested(<span class="type"><a href="qprinter.html">QPrinter</a></span><span class="operator">*</span>))<span class="operator">,</span> SLOT(printPreview(<span class="type"><a href="qprinter.html">QPrinter</a></span><span class="operator">*</span>)));
     preview<span class="operator">.</span>exec();
 <span class="preprocessor">#endif</span>
 }

 <span class="type">void</span> TextEdit<span class="operator">::</span>printPreview(<span class="type"><a href="qprinter.html">QPrinter</a></span> <span class="operator">*</span>printer)
 {
 <span class="preprocessor">#ifdef QT_NO_PRINTER</span>
     Q_UNUSED(printer);
 <span class="preprocessor">#else</span>
     textEdit<span class="operator">-</span><span class="operator">&gt;</span>print(printer);
 <span class="preprocessor">#endif</span>
 }

 <span class="type">void</span> TextEdit<span class="operator">::</span>filePrintPdf()
 {
 <span class="preprocessor">#ifndef QT_NO_PRINTER</span>
     <span class="type"><a href="qstring.html">QString</a></span> fileName <span class="operator">=</span> <span class="type"><a href="qfiledialog.html">QFileDialog</a></span><span class="operator">::</span>getSaveFileName(<span class="keyword">this</span><span class="operator">,</span> <span class="string">&quot;Export PDF&quot;</span><span class="operator">,</span>
                                                     <span class="type"><a href="qstring.html">QString</a></span>()<span class="operator">,</span> <span class="string">&quot;*.pdf&quot;</span>);
     <span class="keyword">if</span> (<span class="operator">!</span>fileName<span class="operator">.</span>isEmpty()) {
         <span class="keyword">if</span> (<span class="type"><a href="qfileinfo.html">QFileInfo</a></span>(fileName)<span class="operator">.</span>suffix()<span class="operator">.</span>isEmpty())
             fileName<span class="operator">.</span>append(<span class="string">&quot;.pdf&quot;</span>);
         <span class="type"><a href="qprinter.html">QPrinter</a></span> printer(<span class="type"><a href="qprinter.html">QPrinter</a></span><span class="operator">::</span>HighResolution);
         printer<span class="operator">.</span>setOutputFormat(<span class="type"><a href="qprinter.html">QPrinter</a></span><span class="operator">::</span>PdfFormat);
         printer<span class="operator">.</span>setOutputFileName(fileName);
         textEdit<span class="operator">-</span><span class="operator">&gt;</span>document()<span class="operator">-</span><span class="operator">&gt;</span>print(<span class="operator">&amp;</span>printer);
     }
 <span class="preprocessor">#endif</span>
 }

 <span class="type">void</span> TextEdit<span class="operator">::</span>textBold()
 {
     <span class="type"><a href="qtextcharformat.html">QTextCharFormat</a></span> fmt;
     fmt<span class="operator">.</span>setFontWeight(actionTextBold<span class="operator">-</span><span class="operator">&gt;</span>isChecked() <span class="operator">?</span> <span class="type"><a href="qfont.html">QFont</a></span><span class="operator">::</span>Bold : <span class="type"><a href="qfont.html">QFont</a></span><span class="operator">::</span>Normal);
     mergeFormatOnWordOrSelection(fmt);
 }

 <span class="type">void</span> TextEdit<span class="operator">::</span>textUnderline()
 {
     <span class="type"><a href="qtextcharformat.html">QTextCharFormat</a></span> fmt;
     fmt<span class="operator">.</span>setFontUnderline(actionTextUnderline<span class="operator">-</span><span class="operator">&gt;</span>isChecked());
     mergeFormatOnWordOrSelection(fmt);
 }

 <span class="type">void</span> TextEdit<span class="operator">::</span>textItalic()
 {
     <span class="type"><a href="qtextcharformat.html">QTextCharFormat</a></span> fmt;
     fmt<span class="operator">.</span>setFontItalic(actionTextItalic<span class="operator">-</span><span class="operator">&gt;</span>isChecked());
     mergeFormatOnWordOrSelection(fmt);
 }

 <span class="type">void</span> TextEdit<span class="operator">::</span>textFamily(<span class="keyword">const</span> <span class="type"><a href="qstring.html">QString</a></span> <span class="operator">&amp;</span>f)
 {
     <span class="type"><a href="qtextcharformat.html">QTextCharFormat</a></span> fmt;
     fmt<span class="operator">.</span>setFontFamily(f);
     mergeFormatOnWordOrSelection(fmt);
 }

 <span class="type">void</span> TextEdit<span class="operator">::</span>textSize(<span class="keyword">const</span> <span class="type"><a href="qstring.html">QString</a></span> <span class="operator">&amp;</span>p)
 {
     <span class="type"><a href="qtglobal.html#qreal-typedef">qreal</a></span> pointSize <span class="operator">=</span> p<span class="operator">.</span>toFloat();
     <span class="keyword">if</span> (p<span class="operator">.</span>toFloat() <span class="operator">&gt;</span> <span class="number">0</span>) {
         <span class="type"><a href="qtextcharformat.html">QTextCharFormat</a></span> fmt;
         fmt<span class="operator">.</span>setFontPointSize(pointSize);
         mergeFormatOnWordOrSelection(fmt);
     }
 }

 <span class="type">void</span> TextEdit<span class="operator">::</span>textStyle(<span class="type">int</span> styleIndex)
 {
     <span class="type"><a href="qtextcursor.html">QTextCursor</a></span> cursor <span class="operator">=</span> textEdit<span class="operator">-</span><span class="operator">&gt;</span>textCursor();

     <span class="keyword">if</span> (styleIndex <span class="operator">!</span><span class="operator">=</span> <span class="number">0</span>) {
         <span class="type"><a href="qtextlistformat.html">QTextListFormat</a></span><span class="operator">::</span>Style style <span class="operator">=</span> <span class="type"><a href="qtextlistformat.html">QTextListFormat</a></span><span class="operator">::</span>ListDisc;

         <span class="keyword">switch</span> (styleIndex) {
             <span class="keyword">default</span>:
             <span class="keyword">case</span> <span class="number">1</span>:
                 style <span class="operator">=</span> <span class="type"><a href="qtextlistformat.html">QTextListFormat</a></span><span class="operator">::</span>ListDisc;
                 <span class="keyword">break</span>;
             <span class="keyword">case</span> <span class="number">2</span>:
                 style <span class="operator">=</span> <span class="type"><a href="qtextlistformat.html">QTextListFormat</a></span><span class="operator">::</span>ListCircle;
                 <span class="keyword">break</span>;
             <span class="keyword">case</span> <span class="number">3</span>:
                 style <span class="operator">=</span> <span class="type"><a href="qtextlistformat.html">QTextListFormat</a></span><span class="operator">::</span>ListSquare;
                 <span class="keyword">break</span>;
             <span class="keyword">case</span> <span class="number">4</span>:
                 style <span class="operator">=</span> <span class="type"><a href="qtextlistformat.html">QTextListFormat</a></span><span class="operator">::</span>ListDecimal;
                 <span class="keyword">break</span>;
             <span class="keyword">case</span> <span class="number">5</span>:
                 style <span class="operator">=</span> <span class="type"><a href="qtextlistformat.html">QTextListFormat</a></span><span class="operator">::</span>ListLowerAlpha;
                 <span class="keyword">break</span>;
             <span class="keyword">case</span> <span class="number">6</span>:
                 style <span class="operator">=</span> <span class="type"><a href="qtextlistformat.html">QTextListFormat</a></span><span class="operator">::</span>ListUpperAlpha;
                 <span class="keyword">break</span>;
             <span class="keyword">case</span> <span class="number">7</span>:
                 style <span class="operator">=</span> <span class="type"><a href="qtextlistformat.html">QTextListFormat</a></span><span class="operator">::</span>ListLowerRoman;
                 <span class="keyword">break</span>;
             <span class="keyword">case</span> <span class="number">8</span>:
                 style <span class="operator">=</span> <span class="type"><a href="qtextlistformat.html">QTextListFormat</a></span><span class="operator">::</span>ListUpperRoman;
                 <span class="keyword">break</span>;
         }

         cursor<span class="operator">.</span>beginEditBlock();

         <span class="type"><a href="qtextblockformat.html">QTextBlockFormat</a></span> blockFmt <span class="operator">=</span> cursor<span class="operator">.</span>blockFormat();

         <span class="type"><a href="qtextlistformat.html">QTextListFormat</a></span> listFmt;

         <span class="keyword">if</span> (cursor<span class="operator">.</span>currentList()) {
             listFmt <span class="operator">=</span> cursor<span class="operator">.</span>currentList()<span class="operator">-</span><span class="operator">&gt;</span>format();
         } <span class="keyword">else</span> {
             listFmt<span class="operator">.</span>setIndent(blockFmt<span class="operator">.</span>indent() <span class="operator">+</span> <span class="number">1</span>);
             blockFmt<span class="operator">.</span>setIndent(<span class="number">0</span>);
             cursor<span class="operator">.</span>setBlockFormat(blockFmt);
         }

         listFmt<span class="operator">.</span>setStyle(style);

         cursor<span class="operator">.</span>createList(listFmt);

         cursor<span class="operator">.</span>endEditBlock();
     } <span class="keyword">else</span> {
         <span class="comment">// ####</span>
         <span class="type"><a href="qtextblockformat.html">QTextBlockFormat</a></span> bfmt;
         bfmt<span class="operator">.</span>setObjectIndex(<span class="operator">-</span><span class="number">1</span>);
         cursor<span class="operator">.</span>mergeBlockFormat(bfmt);
     }
 }

 <span class="type">void</span> TextEdit<span class="operator">::</span>textColor()
 {
     <span class="type"><a href="qcolor.html">QColor</a></span> col <span class="operator">=</span> <span class="type"><a href="qcolordialog.html">QColorDialog</a></span><span class="operator">::</span>getColor(textEdit<span class="operator">-</span><span class="operator">&gt;</span>textColor()<span class="operator">,</span> <span class="keyword">this</span>);
     <span class="keyword">if</span> (<span class="operator">!</span>col<span class="operator">.</span>isValid())
         <span class="keyword">return</span>;
     <span class="type"><a href="qtextcharformat.html">QTextCharFormat</a></span> fmt;
     fmt<span class="operator">.</span>setForeground(col);
     mergeFormatOnWordOrSelection(fmt);
     colorChanged(col);
 }

 <span class="type">void</span> TextEdit<span class="operator">::</span>textAlign(<span class="type"><a href="qaction.html">QAction</a></span> <span class="operator">*</span>a)
 {
     <span class="keyword">if</span> (a <span class="operator">=</span><span class="operator">=</span> actionAlignLeft)
         textEdit<span class="operator">-</span><span class="operator">&gt;</span>setAlignment(<span class="type"><a href="qt.html">Qt</a></span><span class="operator">::</span>AlignLeft <span class="operator">|</span> <span class="type"><a href="qt.html">Qt</a></span><span class="operator">::</span>AlignAbsolute);
     <span class="keyword">else</span> <span class="keyword">if</span> (a <span class="operator">=</span><span class="operator">=</span> actionAlignCenter)
         textEdit<span class="operator">-</span><span class="operator">&gt;</span>setAlignment(<span class="type"><a href="qt.html">Qt</a></span><span class="operator">::</span>AlignHCenter);
     <span class="keyword">else</span> <span class="keyword">if</span> (a <span class="operator">=</span><span class="operator">=</span> actionAlignRight)
         textEdit<span class="operator">-</span><span class="operator">&gt;</span>setAlignment(<span class="type"><a href="qt.html">Qt</a></span><span class="operator">::</span>AlignRight <span class="operator">|</span> <span class="type"><a href="qt.html">Qt</a></span><span class="operator">::</span>AlignAbsolute);
     <span class="keyword">else</span> <span class="keyword">if</span> (a <span class="operator">=</span><span class="operator">=</span> actionAlignJustify)
         textEdit<span class="operator">-</span><span class="operator">&gt;</span>setAlignment(<span class="type"><a href="qt.html">Qt</a></span><span class="operator">::</span>AlignJustify);
 }

 <span class="type">void</span> TextEdit<span class="operator">::</span>currentCharFormatChanged(<span class="keyword">const</span> <span class="type"><a href="qtextcharformat.html">QTextCharFormat</a></span> <span class="operator">&amp;</span>format)
 {
     fontChanged(format<span class="operator">.</span>font());
     colorChanged(format<span class="operator">.</span>foreground()<span class="operator">.</span>color());
 }

 <span class="type">void</span> TextEdit<span class="operator">::</span>cursorPositionChanged()
 {
     alignmentChanged(textEdit<span class="operator">-</span><span class="operator">&gt;</span>alignment());
 }

 <span class="type">void</span> TextEdit<span class="operator">::</span>clipboardDataChanged()
 {
 <span class="preprocessor">#ifndef QT_NO_CLIPBOARD</span>
     <span class="keyword">if</span> (<span class="keyword">const</span> <span class="type"><a href="qmimedata.html">QMimeData</a></span> <span class="operator">*</span>md <span class="operator">=</span> <span class="type"><a href="qapplication.html">QApplication</a></span><span class="operator">::</span>clipboard()<span class="operator">-</span><span class="operator">&gt;</span>mimeData())
         actionPaste<span class="operator">-</span><span class="operator">&gt;</span>setEnabled(md<span class="operator">-</span><span class="operator">&gt;</span>hasText());
 <span class="preprocessor">#endif</span>
 }

 <span class="type">void</span> TextEdit<span class="operator">::</span>about()
 {
     <span class="type"><a href="qmessagebox.html">QMessageBox</a></span><span class="operator">::</span>about(<span class="keyword">this</span><span class="operator">,</span> tr(<span class="string">&quot;About&quot;</span>)<span class="operator">,</span> tr(<span class="string">&quot;This example demonstrates Qt's &quot;</span>
         <span class="string">&quot;rich text editing facilities in action, providing an example &quot;</span>
         <span class="string">&quot;document for you to experiment with.&quot;</span>));
 }

 <span class="type">void</span> TextEdit<span class="operator">::</span>mergeFormatOnWordOrSelection(<span class="keyword">const</span> <span class="type"><a href="qtextcharformat.html">QTextCharFormat</a></span> <span class="operator">&amp;</span>format)
 {
     <span class="type"><a href="qtextcursor.html">QTextCursor</a></span> cursor <span class="operator">=</span> textEdit<span class="operator">-</span><span class="operator">&gt;</span>textCursor();
     <span class="keyword">if</span> (<span class="operator">!</span>cursor<span class="operator">.</span>hasSelection())
         cursor<span class="operator">.</span>select(<span class="type"><a href="qtextcursor.html">QTextCursor</a></span><span class="operator">::</span>WordUnderCursor);
     cursor<span class="operator">.</span>mergeCharFormat(format);
     textEdit<span class="operator">-</span><span class="operator">&gt;</span>mergeCurrentCharFormat(format);
 }

 <span class="type">void</span> TextEdit<span class="operator">::</span>fontChanged(<span class="keyword">const</span> <span class="type"><a href="qfont.html">QFont</a></span> <span class="operator">&amp;</span>f)
 {
     comboFont<span class="operator">-</span><span class="operator">&gt;</span>setCurrentIndex(comboFont<span class="operator">-</span><span class="operator">&gt;</span>findText(<span class="type"><a href="qfontinfo.html">QFontInfo</a></span>(f)<span class="operator">.</span>family()));
     comboSize<span class="operator">-</span><span class="operator">&gt;</span>setCurrentIndex(comboSize<span class="operator">-</span><span class="operator">&gt;</span>findText(<span class="type"><a href="qstring.html">QString</a></span><span class="operator">::</span>number(f<span class="operator">.</span>pointSize())));
     actionTextBold<span class="operator">-</span><span class="operator">&gt;</span>setChecked(f<span class="operator">.</span>bold());
     actionTextItalic<span class="operator">-</span><span class="operator">&gt;</span>setChecked(f<span class="operator">.</span>italic());
     actionTextUnderline<span class="operator">-</span><span class="operator">&gt;</span>setChecked(f<span class="operator">.</span>underline());
 }

 <span class="type">void</span> TextEdit<span class="operator">::</span>colorChanged(<span class="keyword">const</span> <span class="type"><a href="qcolor.html">QColor</a></span> <span class="operator">&amp;</span>c)
 {
     <span class="type"><a href="qpixmap.html">QPixmap</a></span> pix(<span class="number">16</span><span class="operator">,</span> <span class="number">16</span>);
     pix<span class="operator">.</span>fill(c);
     actionTextColor<span class="operator">-</span><span class="operator">&gt;</span>setIcon(pix);
 }

 <span class="type">void</span> TextEdit<span class="operator">::</span>alignmentChanged(<span class="type"><a href="qt.html">Qt</a></span><span class="operator">::</span>Alignment a)
 {
     <span class="keyword">if</span> (a <span class="operator">&amp;</span> <span class="type"><a href="qt.html">Qt</a></span><span class="operator">::</span>AlignLeft) {
         actionAlignLeft<span class="operator">-</span><span class="operator">&gt;</span>setChecked(<span class="keyword">true</span>);
     } <span class="keyword">else</span> <span class="keyword">if</span> (a <span class="operator">&amp;</span> <span class="type"><a href="qt.html">Qt</a></span><span class="operator">::</span>AlignHCenter) {
         actionAlignCenter<span class="operator">-</span><span class="operator">&gt;</span>setChecked(<span class="keyword">true</span>);
     } <span class="keyword">else</span> <span class="keyword">if</span> (a <span class="operator">&amp;</span> <span class="type"><a href="qt.html">Qt</a></span><span class="operator">::</span>AlignRight) {
         actionAlignRight<span class="operator">-</span><span class="operator">&gt;</span>setChecked(<span class="keyword">true</span>);
     } <span class="keyword">else</span> <span class="keyword">if</span> (a <span class="operator">&amp;</span> <span class="type"><a href="qt.html">Qt</a></span><span class="operator">::</span>AlignJustify) {
         actionAlignJustify<span class="operator">-</span><span class="operator">&gt;</span>setChecked(<span class="keyword">true</span>);
     }
 }</pre>
</div>
<!-- @@@demos/textedit/textedit.cpp -->
      </div>
    </div>
    </div> 
    <div class="ft">
      <span></span>
    </div>
  </div> 
  <div class="footer">
    <p>
      <acronym title="Copyright">&copy;</acronym> 2015 The Qt Company Ltd.
      Documentation contributions included herein are the copyrights of
      their respective owners.</p>
    <br />
    <p>
      The documentation provided herein is licensed under the terms of the
      <a href="http://www.gnu.org/licenses/fdl.html">GNU Free Documentation
      License version 1.3</a> as published by the Free Software Foundation.</p>
    <p>
      Documentation sources may be obtained from <a href="http://www.qt-project.org">
      www.qt-project.org</a>.</p>
    <br />
    <p>
      Qt and respective logos are trademarks of The Qt Company Ltd 
      in Finland and/or other countries worldwide. All other trademarks are property
      of their respective owners. <a title="Privacy Policy"
      href="http://en.gitorious.org/privacy_policy/">Privacy Policy</a></p>
  </div>

  <script src="scripts/functions.js" type="text/javascript"></script>
</body>
</html>
