<?xml version="1.0" encoding="UTF-8"?>
<!DOCTYPE html PUBLIC "-//W3C//DTD XHTML 1.0 Strict//EN" "http://www.w3.org/TR/xhtml1/DTD/xhtml1-strict.dtd">
<html xmlns="http://www.w3.org/1999/xhtml" xml:lang="en_US" lang="en_US">
<head>
  <meta http-equiv="Content-Type" content="text/html; charset=utf-8" />
<!-- sql-driver.qdoc -->
  <title>Qt 4.8: SQL Database Drivers</title>
  <link rel="stylesheet" type="text/css" href="style/style.css" />
  <script src="scripts/jquery.js" type="text/javascript"></script>
  <script src="scripts/functions.js" type="text/javascript"></script>
  <link rel="stylesheet" type="text/css" href="style/superfish.css" />
  <link rel="stylesheet" type="text/css" href="style/narrow.css" />
  <!--[if IE]>
<meta name="MSSmartTagsPreventParsing" content="true">
<meta http-equiv="imagetoolbar" content="no">
<![endif]-->
<!--[if lt IE 7]>
<link rel="stylesheet" type="text/css" href="style/style_ie6.css">
<![endif]-->
<!--[if IE 7]>
<link rel="stylesheet" type="text/css" href="style/style_ie7.css">
<![endif]-->
<!--[if IE 8]>
<link rel="stylesheet" type="text/css" href="style/style_ie8.css">
<![endif]-->

<script src="scripts/superfish.js" type="text/javascript"></script>
<script src="scripts/narrow.js" type="text/javascript"></script>

</head>
<body class="" onload="CheckEmptyAndLoadList();">
 <div class="header" id="qtdocheader">
    <div class="content"> 
    <div id="nav-logo">
      <a href="index.html">Home</a></div>
    <a href="index.html" class="qtref"><span>Qt Reference Documentation</span></a>
    <div id="narrowsearch"></div>
    <div id="nav-topright">
      <ul>
        <li class="nav-topright-home"><a href="http://qt.digia.com/">Qt HOME</a></li>
        <li class="nav-topright-dev"><a href="http://qt-project.org/">DEV</a></li>
        <li class="nav-topright-doc nav-topright-doc-active"><a href="http://qt-project.org/doc/">
          DOC</a></li>
        <li class="nav-topright-blog"><a href="http://blog.qt.digia.com/">BLOG</a></li>
      </ul>
    </div>
    <div id="shortCut">
      <ul>
        <li class="shortCut-topleft-inactive"><span><a href="index.html">Qt 4.8</a></span></li>
        <li class="shortCut-topleft-active"><a href="http://qt-project.org/doc/">ALL VERSIONS        </a></li>
      </ul>
     </div>
 <ul class="sf-menu" id="narrowmenu"> 
             <li><a href="#">API Lookup</a> 
                 <ul> 
                     <li><a href="classes.html">Class index</a></li> 
           <li><a href="functions.html">Function index</a></li> 
           <li><a href="modules.html">Modules</a></li> 
           <li><a href="namespaces.html">Namespaces</a></li> 
           <li><a href="qtglobal.html">Global Declarations</a></li> 
           <li><a href="qdeclarativeelements.html">QML elements</a></li> 
             </ul> 
             </li> 
             <li><a href="#">Qt Topics</a> 
                 <ul> 
                        <li><a href="qt-basic-concepts.html">Programming with Qt</a></li>  
                        <li><a href="qtquick.html">Device UIs &amp; Qt Quick</a></li>  
                        <li><a href="qt-gui-concepts.html">UI Design with Qt</a></li>  
                        <li><a href="supported-platforms.html">Supported Platforms</a></li>  
                        <li><a href="technology-apis.html">Qt and Key Technologies</a></li>  
                        <li><a href="best-practices.html">How-To's and Best Practices</a></li>  
              </ul> 
                 </li> 
                 <li><a href="#">Examples</a> 
                     <ul> 
                       <li><a href="all-examples.html">Examples</a></li> 
                       <li><a href="tutorials.html">Tutorials</a></li> 
                       <li><a href="demos.html">Demos</a></li> 
                       <li><a href="qdeclarativeexamples.html">QML Examples</a></li> 
                </ul> 
                     </li> 
                 </ul> 
    </div>
  </div>
  <div class="wrapper">
    <div class="hd">
      <span></span>
    </div>
    <div class="bd group">
      <div class="sidebar">
        <div class="searchlabel">
          Search index:</div>
        <div class="search" id="sidebarsearch">
          <form id="qtdocsearch" action="" onsubmit="return false;">
            <fieldset>
              <input type="text" name="searchstring" id="pageType" value="" />
 <div id="resultdialog"> 
 <a href="#" id="resultclose">Close</a> 
 <p id="resultlinks" class="all"><a href="#" id="showallresults">All</a> | <a href="#" id="showapiresults">API</a> | <a href="#" id="showarticleresults">Articles</a> | <a href="#" id="showexampleresults">Examples</a></p> 
 <p id="searchcount" class="all"><span id="resultcount"></span><span id="apicount"></span><span id="articlecount"></span><span id="examplecount"></span>&nbsp;results:</p> 
 <ul id="resultlist" class="all"> 
 </ul> 
 </div> 
            </fieldset>
          </form>
        </div>
        <div class="box first bottombar" id="lookup">
          <h2 title="API Lookup"><span></span>
            API Lookup</h2>
          <div  id="list001" class="list">
          <ul id="ul001" >
              <li class="defaultLink"><a href="classes.html">Class index</a></li>
              <li class="defaultLink"><a href="functions.html">Function index</a></li>
              <li class="defaultLink"><a href="modules.html">Modules</a></li>
              <li class="defaultLink"><a href="namespaces.html">Namespaces</a></li>
              <li class="defaultLink"><a href="qtglobal.html">Global Declarations</a></li>
              <li class="defaultLink"><a href="qdeclarativeelements.html">QML elements</a></li>
            </ul> 
          </div>
        </div>
        <div class="box bottombar" id="topics">
          <h2 title="Qt Topics"><span></span>
            Qt Topics</h2>
          <div id="list002" class="list">
            <ul id="ul002" >
               <li class="defaultLink"><a href="qt-basic-concepts.html">Programming with Qt</a></li> 
               <li class="defaultLink"><a href="qtquick.html">Device UIs &amp; Qt Quick</a></li> 
               <li class="defaultLink"><a href="qt-gui-concepts.html">UI Design with Qt</a></li> 
               <li class="defaultLink"><a href="supported-platforms.html">Supported Platforms</a></li>  
               <li class="defaultLink"><a href="technology-apis.html">Qt and Key Technologies</a></li> 
               <li class="defaultLink"><a href="best-practices.html">How-To's and Best Practices</a></li> 
            </ul>  
          </div>
        </div>
        <div class="box" id="examples">
          <h2 title="Examples"><span></span>
            Examples</h2>
          <div id="list003" class="list">
        <ul id="ul003">
              <li class="defaultLink"><a href="all-examples.html">Examples</a></li>
              <li class="defaultLink"><a href="tutorials.html">Tutorials</a></li>
              <li class="defaultLink"><a href="demos.html">Demos</a></li>
              <li class="defaultLink"><a href="qdeclarativeexamples.html">QML Examples</a></li>
            </ul> 
          </div>
        </div>
      </div>
      <div class="wrap">
        <div class="toolbar">
          <div class="breadcrumb toolblock">
            <ul>
              <li class="first"><a href="index.html">Home</a></li>
              <!--  Breadcrumbs go here -->
<li>SQL Database Drivers</li>
            </ul>
          </div>
          <div class="toolbuttons toolblock">
            <ul>
              <li id="smallA" class="t_button">A</li>
              <li id="medA" class="t_button active">A</li>
              <li id="bigA" class="t_button">A</li>
              <li id="print" class="t_button"><a href="javascript:this.print();">
                <span>Print</span></a></li>
            </ul>
        </div>
        </div>
        <div class="content mainContent">
<div class="toc">
<h3><a name="toc">Contents</a></h3>
<ul>
<li class="level1"><a href="#supported-databases">Supported Databases</a></li>
<li class="level1"><a href="#building-the-drivers-using-configure">Building the Drivers Using Configure</a></li>
<li class="level1"><a href="#building-the-plugins-manually">Building the Plugins Manually</a></li>
<li class="level2"><a href="#qmysql-for-mysql-4-and-higher">QMYSQL for MySQL 4 and higher</a></li>
<li class="level3"><a href="#qmysql-stored-procedure-support">QMYSQL Stored Procedure Support</a></li>
<li class="level3"><a href="#embedded-mysql-server">Embedded MySQL Server</a></li>
<li class="level3"><a href="#how-to-build-the-qmysql-plugin-on-unix-and-mac-os-x">How to Build the QMYSQL Plugin on Unix and Mac OS X</a></li>
<li class="level3"><a href="#how-to-build-the-qmysql-plugin-on-windows">How to Build the QMYSQL Plugin on Windows</a></li>
<li class="level3"><a href="#how-to-build-the-mysql-driver-for-mingw-users">How to build the MySQL driver for MinGW users</a></li>
<li class="level2"><a href="#qoci-for-the-oracle-call-interface-oci">QOCI for the Oracle Call Interface (OCI)</a></li>
<li class="level3"><a href="#general-information-about-the-oci-plugin">General Information about the OCI plugin</a></li>
<li class="level3"><a href="#oci-user-authentication">OCI User Authentication</a></li>
<li class="level3"><a href="#oci-blob-lob-support">OCI BLOB/LOB Support</a></li>
<li class="level3"><a href="#how-to-build-the-oci-plugin-on-unix-and-mac-os-x">How to Build the OCI Plugin on Unix and Mac OS X</a></li>
<li class="level3"><a href="#how-to-build-the-oci-plugin-on-windows">How to Build the OCI Plugin on Windows</a></li>
<li class="level2"><a href="#qodbc-for-open-database-connectivity-odbc">QODBC for Open Database Connectivity (ODBC)</a></li>
<li class="level3"><a href="#general-information-about-the-odbc-plugin">General Information about the ODBC plugin</a></li>
<li class="level3"><a href="#odbc-stored-procedure-support">ODBC Stored Procedure Support</a></li>
<li class="level3"><a href="#odbc-unicode-support">ODBC Unicode Support</a></li>
<li class="level3"><a href="#how-to-build-the-odbc-plugin-on-unix-and-mac-os-x">How to Build the ODBC Plugin on Unix and Mac OS X</a></li>
<li class="level3"><a href="#how-to-build-the-odbc-plugin-on-windows">How to Build the ODBC Plugin on Windows</a></li>
<li class="level2"><a href="#qpsql-for-postgresql-version-7-3-and-above">QPSQL for PostgreSQL (Version 7.3 and Above)</a></li>
<li class="level3"><a href="#general-information-about-the-qpsql-driver">General Information about the QPSQL driver</a></li>
<li class="level3"><a href="#qpsql-unicode-support">QPSQL Unicode Support</a></li>
<li class="level3"><a href="#qpsql-blob-support">QPSQL BLOB Support</a></li>
<li class="level3"><a href="#how-to-build-the-qpsql-plugin-on-unix-and-mac-os-x">How to Build the QPSQL Plugin on Unix and Mac OS X</a></li>
<li class="level3"><a href="#how-to-build-the-qpsql-plugin-on-windows">How to Build the QPSQL Plugin on Windows</a></li>
<li class="level2"><a href="#qtds-for-sybase-adaptive-server">QTDS for Sybase Adaptive Server</a></li>
<li class="level3"><a href="#general-information-about-qtds">General Information about QTDS</a></li>
<li class="level3"><a href="#how-to-build-the-qtds-plugin-on-unix-and-mac-os-x">How to Build the QTDS Plugin on Unix and Mac OS X</a></li>
<li class="level3"><a href="#how-to-build-the-qdts-plugin-on-windows">How to Build the QDTS Plugin on Windows</a></li>
<li class="level2"><a href="#qdb2-for-ibm-db2-version-7-1-and-above">QDB2 for IBM DB2 (Version 7.1 and Above)</a></li>
<li class="level3"><a href="#general-information-about-qdb2">General Information about QDB2</a></li>
<li class="level3"><a href="#how-to-build-the-qdb2-plugin-on-unix-and-mac-os-x">How to Build the QDB2 Plugin on Unix and Mac OS X</a></li>
<li class="level3"><a href="#how-to-build-the-qdb2-plugin-on-windows">How to Build the QDB2 Plugin on Windows</a></li>
<li class="level2"><a href="#qsqlite2-for-sqlite-version-2">QSQLITE2 for SQLite Version 2</a></li>
<li class="level2"><a href="#qsqlite-for-sqlite-version-3-and-above">QSQLITE for SQLite (Version 3 and Above)</a></li>
<li class="level3"><a href="#general-information-about-qsqlite">General Information about QSQLITE</a></li>
<li class="level3"><a href="#how-to-build-the-qsqlite-plugin">How to Build the QSQLITE Plugin</a></li>
<li class="level3"><a href="#qsqlite-file-format-compatibility">QSQLITE File Format Compatibility</a></li>
<li class="level2"><a href="#qsymsql-for-sqlite-version-3-and-above-with-symbian-sql-database">QSYMSQL for SQLite (Version 3 and Above) with Symbian SQL Database</a></li>
<li class="level3"><a href="#general-information-about-qsymsql">General Information about QSYMSQL</a></li>
<li class="level3"><a href="#how-to-build-the-qsymsql-plugin">How to Build the QSYMSQL Plugin</a></li>
<li class="level2"><a href="#qibase-for-borland-interbase">QIBASE for Borland InterBase</a></li>
<li class="level3"><a href="#general-information-about-qibase">General Information about QIBASE</a></li>
<li class="level3"><a href="#qibase-unicode-support-and-text-encoding">QIBASE Unicode Support and Text Encoding</a></li>
<li class="level3"><a href="#qibase-stored-procedures">QIBASE Stored procedures</a></li>
<li class="level3"><a href="#how-to-build-the-qibase-plugin-on-unix-and-mac-os-x">How to Build the QIBASE Plugin on Unix and Mac OS X</a></li>
<li class="level3"><a href="#how-to-build-the-qibase-plugin-on-windows">How to Build the QIBASE Plugin on Windows</a></li>
<li class="level1"><a href="#troubleshooting">Troubleshooting</a></li>
<li class="level1"><a href="#how-to-write-your-own-database-driver">How to Write Your Own Database Driver</a></li>
</ul>
</div>
<h1 class="title">SQL Database Drivers</h1>
<span class="subtitle"></span>
<!-- $$$sql-driver.html-description -->
<div class="descr"> <a name="details"></a>
<p>The <a href="qtsql.html">QtSql</a> module uses driver <a href="plugins-howto.html">plugins</a> to communicate with the different database APIs. Since Qt's SQL Module API is database-independent, all database-specific code is contained within these drivers. Several drivers are supplied with Qt and other drivers can be added. The driver source code is supplied and can be used as a model for <a href="#development">writing your own drivers</a>.</p>
<a name="supported-databases"></a>
<h2>Supported Databases</h2>
<p>The table below lists the drivers included with Qt. Due to license incompatibilities with the GPL, not all of the plugins are provided with Open Source Versions of Qt.</p>
<table class="generic">
<thead><tr class="qt-style"><th >Driver name</th><th >DBMS</th></tr></thead>
<tr valign="top" class="odd"><td ><a href="#qdb2">QDB2</a></td><td >IBM DB2 (version 7.1 and above)</td></tr>
<tr valign="top" class="even"><td ><a href="#qibase">QIBASE</a></td><td >Borland InterBase</td></tr>
<tr valign="top" class="odd"><td ><a href="#qmysql">QMYSQL</a></td><td >MySQL</td></tr>
<tr valign="top" class="even"><td ><a href="#qoci">QOCI</a></td><td >Oracle Call Interface Driver</td></tr>
<tr valign="top" class="odd"><td ><a href="#qodbc">QODBC</a></td><td >Open Database Connectivity (ODBC) - Microsoft SQL Server and other ODBC-compliant databases</td></tr>
<tr valign="top" class="even"><td ><a href="#qpsql">QPSQL</a></td><td >PostgreSQL (versions 7.3 and above)</td></tr>
<tr valign="top" class="odd"><td ><a href="#qsqlite2">QSQLITE2</a></td><td >SQLite version 2</td></tr>
<tr valign="top" class="even"><td ><a href="#qsqlite">QSQLITE</a></td><td >SQLite version 3</td></tr>
<tr valign="top" class="odd"><td ><a href="#qsymsql">QSYMSQL</a></td><td >SQLite version 3 for Symbian SQL Database</td></tr>
<tr valign="top" class="even"><td ><a href="#qtds">QTDS</a></td><td >Sybase Adaptive Server <b>Note:</b> obsolete from Qt 4.7</td></tr>
</table>
<p>SQLite is the in-process database system with the best test coverage and support on all platforms. Oracle via OCI, and PostreSQL and MySQL through either ODBC or a native driver are well-tested on Windows and Linux. The completeness of the support for other systems depends on the availability and quality of client libraries.</p>
<p><b>Note:</b> To build a driver plugin you need to have the appropriate client library for your Database Management System (DBMS). This provides access to the API exposed by the DBMS, and is typically shipped with it. Most installation programs also allow you to install &quot;development libraries&quot;, and these are what you need. These libraries are responsible for the low-level communication with the DBMS.</p>
<a name="building"></a><a name="building-the-drivers-using-configure"></a>
<h2>Building the Drivers Using Configure</h2>
<p>On Unix and Mac OS X, the Qt <tt>configure</tt> script tries to automatically detect the available client libraries on your machine. Run <tt>configure -help</tt> to see what drivers can be built. You should get an output similar to this:</p>
<pre class="cpp"> -no-sql-&lt;driver&gt; ... Disable SQL &lt;driver&gt; entirely.
 -qt-sql-&lt;driver&gt; ... Enable a SQL &lt;driver&gt; in the Qt Library, by default
                      none are turned on.
 -plugin-sql-&lt;driver&gt; Enable SQL &lt;driver&gt; as a plugin to be linked to
                      at run time.

                      Possible values for &lt;driver&gt;:
                      [ db2 ibase mysql oci odbc psql sqlite sqlite2 tds ]</pre>
<p>The <tt>configure</tt> script cannot detect the neccessary libraries and include files if they are not in the standard paths, so it may be necessary to specify these paths using the <tt>-I</tt> and <tt>-L</tt> command-line options. For example, if your MySQL include files are installed in <tt>/usr/local/mysql</tt> (or in <tt>C:\mysql\include</tt> on Windows), then pass the following parameter to configure: <tt>-I/usr/local/mysql</tt> (or <tt>-I C:\mysql\include</tt> for Windows).</p>
<p>On Windows the <tt>-I</tt> parameter doesn't accept spaces in filenames, so use the 8.3 name instead; for example, use <tt>C:\progra~1\mysql</tt> instead of <tt>C:\Program Files\mysql</tt>.</p>
<p>Use the <tt>-qt-sql-&lt;driver&gt;</tt> parameter to build the database driver statically into your Qt library or <tt>-plugin-sql-&lt;driver&gt;</tt> to build the driver as a plugin. Look at the sections that follow for additional information about required libraries.</p>
<a name="buildingmanually"></a><a name="building-the-plugins-manually"></a>
<h2>Building the Plugins Manually</h2>
<a name="qmysql"></a><a name="qmysql-for-mysql-4-and-higher"></a>
<h3>QMYSQL for MySQL 4 and higher</h3>
<a name="qmysql-stored-procedure-support"></a>
<h4>QMYSQL Stored Procedure Support</h4>
<p>MySQL 5 introduces stored procedure support at the SQL level, but no API to control IN, OUT and INOUT parameters. Therefore, parameters have to be set and read using SQL commands instead of <a href="qsqlquery.html#bindValue">QSqlQuery::bindValue</a>().</p>
<p>Example stored procedure:</p>
<pre class="cpp"> create procedure qtestproc (OUT param1 INT, OUT param2 INT)
 BEGIN
     set param1 = 42;
     set param2 = 43;
 END</pre>
<p>Source code to access the OUT values:</p>
<pre class="cpp"> <span class="type"><a href="qsqlquery.html">QSqlQuery</a></span> q;
 q<span class="operator">.</span>exec(<span class="string">&quot;call qtestproc (@outval1, @outval2)&quot;</span>);
 q<span class="operator">.</span>exec(<span class="string">&quot;select @outval1, @outval2&quot;</span>);
 q<span class="operator">.</span>next();
 <a href="qtglobal.html#qDebug">qDebug</a>() <span class="operator">&lt;</span><span class="operator">&lt;</span> q<span class="operator">.</span>value(<span class="number">0</span>) <span class="operator">&lt;</span><span class="operator">&lt;</span> q<span class="operator">.</span>value(<span class="number">1</span>); <span class="comment">// outputs &quot;42&quot; and &quot;43&quot;</span></pre>
<p><b>Note:</b> <tt>@outval1</tt> and <tt>@outval2</tt> are variables local to the current connection and will not be affected by queries sent from another host or connection.</p>
<a name="embedded-mysql-server"></a>
<h4>Embedded MySQL Server</h4>
<p>The MySQL embedded server is a drop-in replacement for the normal client library. With the embedded MySQL server, a MySQL server is not required to use MySQL functionality.</p>
<p>To use the embedded MySQL server, simply link the Qt plugin to <tt>libmysqld</tt> instead of libmysqlclient. This can be done by replacing <tt>-lmysqlclient_r</tt> by <tt>-lmysqld</tt> in the <tt>qmake</tt> command in the section below.</p>
<p>Please refer to the MySQL documentation, chapter &quot;libmysqld, the Embedded MySQL Server Library&quot; for more information about the MySQL embedded server.</p>
<a name="how-to-build-the-qmysql-plugin-on-unix-and-mac-os-x"></a>
<h4>How to Build the QMYSQL Plugin on Unix and Mac OS X</h4>
<p>You need the MySQL header files and as well as the shared library <tt>libmysqlclient.so</tt>. Depending on your Linux distribution you may need to install a package which is usually called &quot;mysql-devel&quot;.</p>
<p>Tell <a href="qmake-manual.html#qmake">qmake</a> where to find the MySQL header files and shared libraries (here it is assumed that MySQL is installed in <tt>/usr/local</tt>) and run <tt>make</tt>:</p>
<pre class="cpp"> cd $QTDIR/src/plugins/sqldrivers/mysql
 qmake &quot;INCLUDEPATH+=/usr/local/include&quot; &quot;LIBS+=-L/usr/local/lib -lmysqlclient_r&quot; mysql.pro
 make</pre>
<p>After installing Qt, as described in the <a href="install-x11.html">Installing Qt for X11 Platforms</a> document, you also need to install the plugin in the standard location:</p>
<pre class="cpp"> cd $QTDIR/src/plugins/sqldrivers/mysql
 make install</pre>
<a name="how-to-build-the-qmysql-plugin-on-windows"></a>
<h4>How to Build the QMYSQL Plugin on Windows</h4>
<p>You need to get the MySQL installation files. Run <tt>SETUP.EXE</tt> and choose &quot;Custom Install&quot;. Install the &quot;Libs &amp; Include Files&quot; Module. Build the plugin as follows (here it is assumed that MySQL is installed in <tt>C:\MySQL</tt>):</p>
<pre class="cpp"> cd %QTDIR%\src\plugins\sqldrivers\mysql
 qmake &quot;INCLUDEPATH+=C:\MySQL\include&quot; &quot;LIBS+=C:\MYSQL\MySQL Server &lt;version&gt;\lib\opt\libmysql.lib&quot; mysql.pro
 nmake</pre>
<p>If you are not using a Microsoft compiler, replace <tt>nmake</tt> with <tt>make</tt> in the line above.</p>
<p><b>Note:</b> This database plugin is not supported for Windows CE.</p>
<p><b>Note:</b> Including <tt>&quot;-o Makefile&quot;</tt> as an argument to <a href="qmake-manual.html#qmake">qmake</a> to tell it where to build the makefile can cause the plugin to be built in release mode only. If you are expecting a debug version to be built as well, don't use the <tt>&quot;-o Makefile&quot;</tt> option.</p>
<a name="how-to-build-the-mysql-driver-for-mingw-users"></a>
<h4>How to build the MySQL driver for MinGW users</h4>
<p>The following steps have been used successfully for WinXP SP3. In this example, Qt 4.6&#x2e;2 is shown.</p>
<ul>
<li>Download the following components:<ul>
<li><tt>MinGW-5.1&#x2e;6&#x2e;exe</tt></li>
<li><tt>mingw-utils-0.3&#x2e;tar.gz</tt></li>
<li>Qt sources, e.g&#x2e; <tt>qt-everywhere-opensource-src-4.6&#x2e;2&#x2e;zip</tt></li>
<li><tt>mysql-5.1&#x2e;35-win32.msi</tt></li>
</ul>
</li>
<li>Install <tt>MinGW-5.1&#x2e;6&#x2e;exe</tt> in, e.g&#x2e; <tt>C:\MinGW</tt>.</li>
<li>Extract <tt>mingw-utils-0.3&#x2e;tar.gz</tt> into, e.g&#x2e; <tt>C:\MinGW</tt>.</li>
<li>Add the path for <tt>MinGW-5.1&#x2e;6&#x2e;exe</tt> to your <tt>PATH</tt> variable, e.g&#x2e; <tt>C:\MinGW\bin;</tt></li>
<li>Extract the Qt sources, (<tt>qt-everywhere-opensource-src-4.6&#x2e;2&#x2e;zip</tt>), into, e.g&#x2e; <tt>C:\Qt</tt>.</li>
<li>Add the path for the eventual Qt binary to your <tt>PATH</tt> variable, e.g&#x2e; <tt>C:\Qt\4.6&#x2e;2\bin;</tt>.</li>
<li>Install MySQL (<tt>mysql-5.1&#x2e;35-win32.msi</tt>), customizing the components. Select only the headers and libraries. Install in, e.g&#x2e; <tt>C:\MySQL\MySQL51</tt>.</li>
<li>Open the DOS prompt, go to <tt>C:\MySQL\MySQL51\lib\opt</tt>, and run the following commands:<ul>
<li><tt>reimp -d libmysql.lib</tt></li>
<li><tt>dlltool -k -d libmysql.def -l libmysql.a</tt></li>
</ul>
</li>
<li>Open the DOS prompt, go to <tt>C:\Qt\4.6&#x2e;2</tt> and run the following commands:<ul>
<li><tt>configure.exe -debug-and-release -platform win32-g++ -qt-sql-mysql -l mysql -I C:\MySQL\MySQL51\include -L C:\MySQL\MySQL51\lib\opt</tt></li>
<li><tt>mingw32-make sub-src</tt></li>
</ul>
<p>This step takes a long time.</p>
</li>
<li>Open the DOS prompt, go to <tt>C:\Qt\4.6&#x2e;2\src\plugins\sqldrivers\mysql</tt> and run the following command:<ul>
<li><tt>qmake &quot;INCLUDEPATH+=C:\MySQL\MySQL51\include&quot; &quot;LIBS+=-L. mysql&quot; mysql.pro</tt></li>
</ul>
</li>
<li>Now the following libraries are ready in <tt>C:\Qt\4.6&#x2e;2\plugins\sqldrivers</tt>.<ul>
<li><tt>libqsqlmysql4.a</tt></li>
<li><tt>libqsqlmysqld4.a</tt></li>
<li><tt>qsqlmysql4.dll</tt></li>
<li><tt>qsqlmysqld4.dll</tt></li>
</ul>
<p>To use the SDK and QtCreator directly, copy these libraries to your <tt>C:\Qt\..&#x2e;\qt\plugins\sqldrivers\</tt>, and copy <tt>C:\MySQL\MySQL51\lib\opt\libmysql.dll</tt> to your <tt>C:\Qt\..&#x2e;\qt\bin\</tt>.</p>
</li>
</ul>
<a name="qoci"></a><a name="qoci-for-the-oracle-call-interface-oci"></a>
<h3>QOCI for the Oracle Call Interface (OCI)</h3>
<a name="general-information-about-the-oci-plugin"></a>
<h4>General Information about the OCI plugin</h4>
<p>The Qt OCI plugin supports Oracle 9i, 10g and higher. After connecting to the Oracle server, the plugin will auto-detect the database version and enable features accordingly.</p>
<p>It's possible to connect to a Oracle database without a tnsnames.ora file. This requires that the database SID is passed to the driver as the database name and that a hostname is given.</p>
<a name="oci-user-authentication"></a>
<h4>OCI User Authentication</h4>
<p>The Qt OCI plugin supports authentication using external credentials (OCI_CRED_EXT). Usually, this means that the database server will use the user authentication provided by the operating system instead of its own authentication mechanism.</p>
<p>Leave the username and password empty when opening a connection with <a href="qsqldatabase.html">QSqlDatabase</a> to use the external credentials authentication.</p>
<a name="oci-blob-lob-support"></a>
<h4>OCI BLOB/LOB Support</h4>
<p>Binary Large Objects (BLOBs) can be read and written, but be aware that this process may require a lot of memory. You should use a forward only query to select LOB fields (see <a href="qsqlquery.html#setForwardOnly">QSqlQuery::setForwardOnly</a>()).</p>
<p>Inserting BLOBs should be done using either a prepared query where the BLOBs are bound to placeholders or <a href="qsqltablemodel.html">QSqlTableModel</a>, which uses a prepared query to do this internally.</p>
<a name="how-to-build-the-oci-plugin-on-unix-and-mac-os-x"></a>
<h4>How to Build the OCI Plugin on Unix and Mac OS X</h4>
<p>For Oracle 10g, all you need is the &quot;Instant Client Package - Basic&quot; and &quot;Instant Client Package - SDK&quot;. For Oracle prior to 10g, you require the standard Oracle client and the SDK packages.</p>
<p>Oracle library files required to build the driver:</p>
<ul>
<li><tt>libclntsh.so</tt> (all versions)</li>
<li><tt>libwtc9.so</tt> (only Oracle 9)</li>
</ul>
<p>Tell <tt>qmake</tt> where to find the Oracle header files and shared libraries and run make:</p>
<p>For Oracle version 9:</p>
<pre class="cpp"> cd $QTDIR/src/plugins/sqldrivers/oci
 qmake &quot;INCLUDEPATH+=$ORACLE_HOME/rdbms/public $ORACLE_HOME/rdbms/demo&quot; &quot;LIBS+=-L$ORACLE_HOME/lib -lclntsh -lwtc9&quot; oci.pro
 make</pre>
<p>For Oracle version 10, we assume that you installed the RPM packages of the Instant Client Package SDK (you need to adjust the version number accordingly):</p>
<pre class="cpp"> cd $QTDIR/src/plugins/sqldrivers/oci
 qmake &quot;INCLUDEPATH+=/usr/include/oracle/10.1.0.3/client/&quot; &quot;LIBS+=-L/usr/lib/oracle/10.1.0.3/client/lib -lclntsh&quot; oci.pro
 make</pre>
<p><b>Note:</b> If you are using the Oracle Instant Client package, you will need to set LD_LIBRARY_PATH when building the OCI SQL plugin and when running an applicaiton that uses the OCI SQL plugin. You can avoid this requirement by setting and RPATH and listing all of the libraries to link to. Here is an example:</p>
<pre class="cpp"> configure -I /usr/include/oracle/10.1.0.3/client -L /usr/lib/oracle/10.1.0.3/client/lib -R /usr/lib/oracle/10.1.0.3/client/lib -lclntsh -lnnz10
 make</pre>
<p>If you wish to build the OCI plugin manually with this method the procedure looks like this:</p>
<pre class="cpp"> cd $QTDIR/src/plugins/sqldrivers/oci
 qmake &quot;INCLUDEPATH+=/usr/include/oracle/10.1.0.3/client&quot; &quot;LIBS+=-L/usr/lib/oracle/10.1.0.3/client/lib -Wl,-rpath,/usr/lib/oracle/10.1.0.3/client/lib -lclntsh -lnnz10&quot; oci.pro
 make</pre>
<a name="how-to-build-the-oci-plugin-on-windows"></a>
<h4>How to Build the OCI Plugin on Windows</h4>
<p>Choosing the option &quot;Programmer&quot; in the Oracle Client Installer from the Oracle Client Installation CD is generally sufficient to build the plugin. For some versions of Oracle Client, you may also need to select the &quot;Call Interface (OCI)&quot; option if it is available.</p>
<p>Build the plugin as follows (here it is assumed that Oracle Client is installed in <tt>C:\oracle</tt>):</p>
<pre class="cpp"> set INCLUDE=%INCLUDE%;c:\oracle\oci\include
 set LIB=%LIB%;c:\oracle\oci\lib\msvc
 cd %QTDIR%\src\plugins\sqldrivers\oci
 qmake oci.pro
 nmake</pre>
<p>If you are not using a Microsoft compiler, replace <tt>nmake</tt> with <tt>make</tt> in the line above.</p>
<p>When you run your application you will also need to add the <tt>oci.dll</tt> path to your <tt>PATH</tt> environment variable:</p>
<pre class="cpp"> set PATH=%PATH%;c:\oracle\bin</pre>
<p><b>Note:</b> This database plugin is not supported for Windows CE.</p>
<a name="qodbc"></a><a name="qodbc-for-open-database-connectivity-odbc"></a>
<h3>QODBC for Open Database Connectivity (ODBC)</h3>
<a name="general-information-about-the-odbc-plugin"></a>
<h4>General Information about the ODBC plugin</h4>
<p>ODBC is a general interface that allows you to connect to multiple DBMSs using a common interface. The QODBC driver allows you to connect to an ODBC driver manager and access the available data sources. Note that you also need to install and configure ODBC drivers for the ODBC driver manager that is installed on your system. The QODBC plugin then allows you to use these data sources in your Qt applications.</p>
<p><b>Note:</b> You should use native drivers in preference to the ODBC driver where they are available. ODBC support can be used as a fallback for compliant databases if no native drivers are available.</p>
<p>On Windows an ODBC driver manager should be installed by default. For Unix systems there are some implementations which must be installed first. Note that every client that uses your application is required to have an ODBC driver manager installed, otherwise the QODBC plugin will not work.</p>
<p>Be aware that when connecting to an ODBC datasource you must pass in the name of the ODBC datasource to the <a href="qsqldatabase.html#setDatabaseName">QSqlDatabase::setDatabaseName</a>() function rather than the actual database name.</p>
<p>The QODBC Plugin needs an ODBC compliant driver manager version 2.0 or later to work. Some ODBC drivers claim to be version 2.0 compliant, but do not offer all the necessary functionality. The QODBC plugin therefore checks whether the data source can be used after a connection has been established and refuses to work if the check fails. If you don't like this behavior, you can remove the <tt>#define ODBC_CHECK_DRIVER</tt> line from the file <tt>qsql_odbc.cpp</tt>. Do this at your own risk!</p>
<p>By default, Qt instructs the ODBC driver to behave as an ODBC 2.x driver. However, for some <i>driver-manager/ODBC 3.x-driver</i> combinations (e.g&#x2e;, <i>unixODBC/MaxDB ODBC</i>), telling the ODBC driver to behave as a 2.x driver can cause the driver plugin to have unexpected behavior. To avoid this problem, instruct the ODBC driver to behave as a 3.x driver by <a href="qsqldatabase.html#setConnectOptions">setting the connect option</a> <tt>&quot;SQL_ATTR_ODBC_VERSION=SQL_OV_ODBC3&quot;</tt> before you <a href="qsqldatabase.html#open">open your database connection</a>. Note that this will affect multiple aspects of ODBC driver behavior, e.g&#x2e;, the SQLSTATEs. Before setting this connect option, consult your ODBC documentation about behavior differences you can expect.</p>
<p>If you experience very slow access of the ODBC datasource, make sure that ODBC call tracing is turned off in the ODBC datasource manager.</p>
<p>Some drivers don't support scrollable cursors. In that case case only queries in forwardOnly mode can be used successfully.</p>
<a name="odbc-stored-procedure-support"></a>
<h4>ODBC Stored Procedure Support</h4>
<p>With Microsoft SQL Server the result set returned by a stored procedure that uses the return statement, or returns multiple result sets, will be accessible only if you set the query's forward only mode to <i>forward</i> using <a href="qsqlquery.html#setForwardOnly">QSqlQuery::setForwardOnly</a>().</p>
<pre class="cpp"> <span class="comment">// STORED_PROC uses the return statement or returns multiple result sets</span>
 <span class="type"><a href="qsqlquery.html">QSqlQuery</a></span> query;
 query<span class="operator">.</span>setForwardOnly(<span class="keyword">true</span>);
 query<span class="operator">.</span>exec(<span class="string">&quot;{call STORED_PROC}&quot;</span>);</pre>
<p><b>Note:</b> The value returned by the stored procedure's return statement is discarded.</p>
<a name="odbc-unicode-support"></a>
<h4>ODBC Unicode Support</h4>
<p>The QODBC Plugin will use the Unicode API if UNICODE is defined. On Windows NT based systems, this is the default. Note that the ODBC driver and the DBMS must also support Unicode.</p>
<p>Some driver managers and drivers don't support UNICODE. To use the QODBC plugin with such drivers it has to be compiled with the Q_ODBC_VERSION_2 defined.</p>
<p>For the Oracle 9 ODBC driver (Windows), it is neccessary to check &quot;SQL_WCHAR support&quot; in the ODBC driver manager otherwise Oracle will convert all Unicode strings to local 8-bit.</p>
<a name="how-to-build-the-odbc-plugin-on-unix-and-mac-os-x"></a>
<h4>How to Build the ODBC Plugin on Unix and Mac OS X</h4>
<p>It is recommended that you use unixODBC. You can find the latest version and ODBC drivers at <a href="http://www.unixodbc.org">http://www.unixodbc.org</a>. You need the unixODBC header files and shared libraries.</p>
<p>Tell <tt>qmake</tt> where to find the unixODBC header files and shared libraries (here it is assumed that unixODBC is installed in <tt>/usr/local/unixODBC</tt>) and run <tt>make</tt>:</p>
<pre class="cpp"> cd $QTDIR/src/plugins/sqldrivers/odbc
 qmake &quot;INCLUDEPATH+=/usr/local/unixODBC/include&quot; &quot;LIBS+=-L/usr/local/unixODBC/lib -lodbc&quot;
 make</pre>
<a name="how-to-build-the-odbc-plugin-on-windows"></a>
<h4>How to Build the ODBC Plugin on Windows</h4>
<p>The ODBC header and include files should already be installed in the right directories. You just have to build the plugin as follows:</p>
<pre class="cpp"> cd %QTDIR%\src\plugins\sqldrivers\odbc
 qmake odbc.pro
 nmake</pre>
<p>If you are not using a Microsoft compiler, replace <tt>nmake</tt> with <tt>make</tt> in the line above.</p>
<p><b>Note:</b> This database plugin is not officially supported for Windows CE.</p>
<a name="qpsql"></a><a name="qpsql-for-postgresql-version-7-3-and-above"></a>
<h3>QPSQL for PostgreSQL (Version 7.3 and Above)</h3>
<a name="general-information-about-the-qpsql-driver"></a>
<h4>General Information about the QPSQL driver</h4>
<p>The QPSQL driver supports version 7.3 and higher of the PostgreSQL server. We recommend that you use a client library from version 7.3&#x2e;15, 7.4&#x2e;13, 8.0&#x2e;8, 8.1&#x2e;4 or more recent as these versions contain security fixes, and as the QPSQL driver might not build with older versions of the client library depending on your platform.</p>
<p>For more information about PostgreSQL visit <a href="http://www.postgresql.org">http://www.postgresql.org</a>.</p>
<a name="qpsql-unicode-support"></a>
<h4>QPSQL Unicode Support</h4>
<p>The QPSQL driver automatically detects whether the PostgreSQL database you are connecting to supports Unicode or not. Unicode is automatically used if the server supports it. Note that the driver only supports the UTF-8 encoding. If your database uses any other encoding, the server must be compiled with Unicode conversion support.</p>
<p>Unicode support was introduced in PostgreSQL version 7.1 and it will only work if both the server and the client library have been compiled with multibyte support. More information about how to set up a multibyte enabled PostgreSQL server can be found in the PostgreSQL Administrator Guide, Chapter 5.</p>
<a name="qpsql-blob-support"></a>
<h4>QPSQL BLOB Support</h4>
<p>Binary Large Objects are supported through the <tt>BYTEA</tt> field type in PostgreSQL server versions &gt;= 7.1&#x2e;</p>
<a name="how-to-build-the-qpsql-plugin-on-unix-and-mac-os-x"></a>
<h4>How to Build the QPSQL Plugin on Unix and Mac OS X</h4>
<p>You need the PostgreSQL client library and headers installed.</p>
<p>To make <tt>qmake</tt> find the PostgreSQL header files and shared libraries, run <tt>qmake</tt> the following way (assuming that the PostgreSQL client is installed in <tt>/usr</tt>):</p>
<pre class="cpp"> cd $QTDIR/src/plugins/sqldrivers/psql
 qmake &quot;INCLUDEPATH+=/usr/include/pgsql&quot; &quot;LIBS+=-L/usr/lib -lpq&quot; psql.pro
 make</pre>
<p>After installing Qt, as described in the <a href="install-x11.html">Installing Qt for X11 Platforms</a> document, you also need to install the plugin in the standard location:</p>
<pre class="cpp"> cd $QTDIR/src/plugins/sqldrivers/psql
 make install</pre>
<a name="how-to-build-the-qpsql-plugin-on-windows"></a>
<h4>How to Build the QPSQL Plugin on Windows</h4>
<p>Install the appropriate PostgreSQL developer libraries for your compiler. Assuming that PostgreSQL was installed in <tt>C:\psql</tt>, build the plugin as follows:</p>
<pre class="cpp"> cd %QTDIR%\src\plugins\sqldrivers\psql
 qmake &quot;INCLUDEPATH+=C:\psql\include&quot; &quot;LIBS+=C:\psql\lib\ms\libpq.lib&quot; psql.pro
 nmake</pre>
<p>Users of MinGW may wish to consult the following online document: <a href="http://www.postgresql.org/docs/current/static/installation-platform-notes.html#INSTALLATION-NOTES-MINGW">PostgreSQL MinGW/Native Windows</a>.</p>
<p><b>Note:</b> This database plugin is not supported for Windows CE.</p>
<a name="qtds"></a><a name="qtds-for-sybase-adaptive-server"></a>
<h3>QTDS for Sybase Adaptive Server</h3>
<p><b>Note:</b> TDS is no longer used by MS Sql Server, and is superceded by <a href="#qodbc">ODBC</a>. QTDS is obsolete from Qt 4.7&#x2e;</p>
<a name="general-information-about-qtds"></a>
<h4>General Information about QTDS</h4>
<p>It is not possible to set the port with <a href="qsqldatabase.html#setPort">QSqlDatabase::setPort</a>() due to limitations in the Sybase client library. Refer to the Sybase documentation for information on how to set up a Sybase client configuration file to enable connections to databases on non-default ports.</p>
<a name="how-to-build-the-qtds-plugin-on-unix-and-mac-os-x"></a>
<h4>How to Build the QTDS Plugin on Unix and Mac OS X</h4>
<p>Under Unix, two libraries are available which support the TDS protocol:</p>
<ul>
<li>FreeTDS, a free implementation of the TDS protocol (<a href="http://www.freetds.org">http://www.freetds.org</a>). Note that FreeTDS is not yet stable, so some functionality may not work as expected.</li>
<li>Sybase Open Client, available from <a href="http://www.sybase.com">http://www.sybase.com</a>. Note for Linux users: Get the Open Client RPM from <a href="http://linux.sybase.com">http://linux.sybase.com</a>.</li>
</ul>
<p>Regardless of which library you use, the shared object file <tt>libsybdb.so</tt> is needed. Set the <tt>SYBASE</tt> environment variable to point to the directory where you installed the client library and execute <tt>qmake</tt>:</p>
<pre class="cpp"> cd $QTDIR/src/plugins/sqldrivers/tds
 qmake &quot;INCLUDEPATH=$SYBASE/include&quot; &quot;LIBS=-L$SYBASE/lib -lsybdb&quot;
 make</pre>
<a name="how-to-build-the-qdts-plugin-on-windows"></a>
<h4>How to Build the QDTS Plugin on Windows</h4>
<p>You can either use the DB-Library supplied by Microsoft or the Sybase Open Client (<a href="http://www.sybase.com">http://www.sybase.com</a>). You must include <tt>NTWDBLIB.LIB</tt> to build the plugin:</p>
<pre class="cpp"> cd %QTDIR%\src\plugins\sqldrivers\tds
 qmake &quot;LIBS+=NTWDBLIB.LIB&quot; tds.pro
 nmake</pre>
<p>By default the Microsoft library is used on Windows, if you want to force the use of the Sybase Open Client, you must define <tt>Q_USE_SYBASE</tt> in <tt>%QTDIR%\src\sql\drivers\tds\qsql_tds.cpp</tt>. If you are not using a Microsoft compiler, replace <tt>nmake</tt> with <tt>make</tt> in the line above.</p>
<p><b>Note:</b> This database plugin is not supported for Windows CE.</p>
<a name="qdb2"></a><a name="qdb2-for-ibm-db2-version-7-1-and-above"></a>
<h3>QDB2 for IBM DB2 (Version 7.1 and Above)</h3>
<a name="general-information-about-qdb2"></a>
<h4>General Information about QDB2</h4>
<p>The Qt DB2 plugin makes it possible to access IBM DB2 databases. It has been tested with IBM DB2 v7.1 and 7.2&#x2e; You must install the IBM DB2 development client library, which contains the header and library files necessary for compiling the QDB2 plugin.</p>
<p>The QDB2 driver supports prepared queries, reading/writing of Unicode strings and reading/writing of BLOBs.</p>
<p>We suggest using a forward-only query when calling stored procedures in DB2 (see <a href="qsqlquery.html#setForwardOnly">QSqlQuery::setForwardOnly</a>()).</p>
<a name="how-to-build-the-qdb2-plugin-on-unix-and-mac-os-x"></a>
<h4>How to Build the QDB2 Plugin on Unix and Mac OS X</h4>
<pre class="cpp"> cd $QTDIR/src/plugins/sqldrivers/db2
 qmake &quot;INCLUDEPATH+=$DB2DIR/include&quot; &quot;LIBS+=-L$DB2DIR/lib -ldb2&quot;
 make</pre>
<p>After installing Qt, as described in the <a href="install-x11.html">Installing Qt for X11 Platforms</a> document, you also need to install the plugin in the standard location:</p>
<pre class="cpp"> cd $QTDIR/src/plugins/sqldrivers/db2
 make install</pre>
<a name="how-to-build-the-qdb2-plugin-on-windows"></a>
<h4>How to Build the QDB2 Plugin on Windows</h4>
<p>The DB2 header and include files should already be installed in the right directories. You just have to build the plugin as follows:</p>
<pre class="cpp"> cd %QTDIR%\src\plugins\sqldrivers\db2
 qmake &quot;INCLUDEPATH+=&lt;DB2 home&gt;/sqllib/include&quot; &quot;LIBS+=&lt;DB2 home&gt;/sqllib/lib/db2cli.lib&quot;
 nmake</pre>
<p>If you are not using a Microsoft compiler, replace <tt>nmake</tt> with <tt>make</tt> in the line above.</p>
<p><b>Note:</b> This database plugin is not supported for Windows CE.</p>
<a name="qsqlite2"></a><a name="qsqlite2-for-sqlite-version-2"></a>
<h3>QSQLITE2 for SQLite Version 2</h3>
<p>The Qt SQLite 2 plugin is offered for compatibility. Whenever possible, use the <a href="#qsqlite">version 3 plugin</a> instead. The build instructions for version 3 apply to version 2 as well.</p>
<a name="qsqlite"></a><a name="qsqlite-for-sqlite-version-3-and-above"></a>
<h3>QSQLITE for SQLite (Version 3 and Above)</h3>
<a name="general-information-about-qsqlite"></a>
<h4>General Information about QSQLITE</h4>
<p>The Qt SQLite plugin makes it possible to access SQLite databases. SQLite is an in-process database, which means that it is not necessary to have a database server. SQLite operates on a single file, which must be set as the database name when opening a connection. If the file does not exist, SQLite will try to create it. SQLite also supports in-memory databases, simply pass &quot;:memory:&quot; as the database name.</p>
<p>SQLite has some restrictions regarding multiple users and multiple transactions. If you try to read/write on a resource from different transactions, your application might freeze until one transaction commits or rolls back. The Qt SQLite driver will retry to write to a locked resource until it runs into a timeout (see <tt>QSQLITE_BUSY_TIMEOUT</tt> at <a href="qsqldatabase.html#setConnectOptions">QSqlDatabase::setConnectOptions</a>()).</p>
<p>In SQLite any column, with the exception of an INTEGER PRIMARY KEY column, may be used to store any type of value. For instance, a column declared as INTEGER may contain an integer value in one row and a text value in the next. This is due to SQLite associating the type of a value with the value itself rather than with the column it is stored in. A consequence of this is that the type returned by <a href="qsqlfield.html#type">QSqlField::type</a>() only indicates the field's recommended type. No assumption of the actual type should be made from this and the type of the individual values should be checked.</p>
<p>The driver is locked for updates while a select is executed. This may cause problems when using <a href="qsqltablemodel.html">QSqlTableModel</a> because Qt's item views fetch data as needed (with QSqlQuery::fetchMore() in the case of <a href="qsqltablemodel.html">QSqlTableModel</a>).</p>
<p>You can find information about SQLite on <a href="http://www.sqlite.org">http://www.sqlite.org</a>.</p>
<a name="how-to-build-the-qsqlite-plugin"></a>
<h4>How to Build the QSQLITE Plugin</h4>
<p>SQLite version 3 is included as a third-party library within Qt. It can be built by passing the following parameters to the configure script: <tt>-plugin-sql-sqlite</tt> (build as a plugin) or <tt>-qt-sql-sqlite</tt> (linked directly into the Qt library).</p>
<p>If you don't want to use the SQLite library included with Qt, you can build it manually (replace <tt>$SQLITE</tt> by the directory where SQLite resides):</p>
<pre class="cpp"> cd $QTDIR/src/plugins/sqldrivers/sqlite
 qmake &quot;INCLUDEPATH+=$SQLITE/include&quot; &quot;LIBS+=-L$SQLITE/lib -lsqlite&quot;
 make</pre>
<p>After installing Qt, as described in the <a href="install-x11.html">Installing Qt for X11 Platforms</a> document, you also need to install the plugin in the standard location:</p>
<pre class="cpp"> cd $QTDIR/src/plugins/sqldrivers/sqlite
 make install</pre>
<p>On Windows:</p>
<pre class="cpp"> cd %QTDIR%\src\plugins\sqldrivers\sqlite
 qmake &quot;INCLUDEPATH+=C:\SQLITE\INCLUDE&quot; &quot;LIBS+=C:\SQLITE\LIB\SQLITE3.LIB&quot; sqlite.pro
 nmake</pre>
<a name="qsqlite-file-format-compatibility"></a>
<h4>QSQLITE File Format Compatibility</h4>
<p>SQLite minor releases sometimes break file format forward compatibility. For example, SQLite 3.3 can read database files created with SQLite 3.2, but databases created with SQLite 3.3 cannot be read by SQLite 3.2&#x2e; Please refer to the SQLite documentation and change logs for information about file format compatibility between versions.</p>
<p>Qt minor releases usually follow the SQLite minor releases, while Qt patch releases follow SQLite patch releases. Patch releases are therefore both backward and forward compatible.</p>
<p>To force SQLite to use a specific file format, it is neccessary to build and ship your own database plugin with your own SQLite library as illustrated above. Some versions of SQLite can be forced to write a specific file format by setting the <tt>SQLITE_DEFAULT_FILE_FORMAT</tt> define when building SQLite.</p>
<a name="qsymsql"></a><a name="qsymsql-for-sqlite-version-3-and-above-with-symbian-sql-database"></a>
<h3>QSYMSQL for SQLite (Version 3 and Above) with Symbian SQL Database</h3>
<a name="general-information-about-qsymsql"></a>
<h4>General Information about QSYMSQL</h4>
<p>QSYMSQL driver enables clients to access the native Symbian database engine (�Symbian SQL�) through the QtSQL API.</p>
<p>The main difference to QSQLITE is that, with Symbian SQL database client can specify a set of access control policies when creating a new database. It uses Symbian SQL security policy definitions within open() call (security policy is defined with in the connection options parameters).</p>
<p>Symbian RSqlSecurityPolicy class is a container for the security policies for a shared SQL database.</p>
<p>The container can contain: security policies that apply to the database. security policies that apply to individual database objects, i.e&#x2e; database tables.</p>
<p>For the database, you use RSqlSecurityPolicy::SetDbPolicy() to apply a separate security policy to: the database schema. read activity on the database. write activity on the database.</p>
<p>For database tables, you use RSqlSecurityPolicy::SetPolicy() to apply a separate security policy to: write activity on each named database table. read activity on each named database table.</p>
<p>More information about Symbian SQL and RSqlSecurityPolicy class reference about policy definitions, can be found from Forum Nokia Library: http://library.developer.nokia.com/.</p>
<p>Example of setting Security Policy:</p>
<p>Connection options hold definition for security policies and all parameters that does not contain &quot;POLICY_&quot; will be passed to RSqlDatabase. Policy will be filled according to parsed values.</p>
<p>Value in database wide parameters starts by definition which can be vendorId or secureId. These come directly from TSecurityPolicy class in Symbian.</p>
<p>POLICY_DB_DEFAULT Default security policy which will be used for the database and all database objects. POLICY_DB_DEFAULT must be defined before any other policy definitions can be used. POLICY_DB_READ Read database security policy. An application with read database security policy can read from database. POLICY_DB_WRITE: Write database security policy. An application with write database security policy can write to database. POLICY_DB_SCHEMA: Schema database security policy. An application with schema database security policy can modify the database schema, write to database, read from database.</p>
<p>Format: POLICY_DB_DEFAULT=cap1,cap2,cap3,cap4,cap5,cap6,cap7 (Up to 7 capabilities) POLICY_DB_READ=cap1,cap2,cap3,cap4,cap5,cap6,cap7 (Up to 7 capabilities) POLICY_DB_WRITE=vendorid,cap1,cap2,cap3 (Vendor ID and up to 3 capabilities) POLICY_DB_SCHEMA=secureid,cap1,cap2,cap3 (Secure ID and up to 3 capabilities)</p>
<p>Table policies does not support schema policy as database level does.</p>
<p>Table specific parameters would be as: POLICY_TABLE_WRITE=tablename,cap1,cap2,cap3,cap4,cap5,cap6,cap7 POLICY_TABLE_READ=tablename,cap1,cap2,cap3,cap4,cap5,cap6,cap7</p>
<p>Vendor Id and Secure id format: vid[0x12345678] (Hex) sid[0x12345678] (Hex)</p>
<p>Examples: Setting default policy: <a href="qsqldatabase.html">QSqlDatabase</a> database = QSqlDatabase::addDatabase(&quot;QSYMSQL&quot;, &quot;MyConnection&quot;); database.setConnectOptions(&quot;POLICY_DB_DEFAULT=ReadDeviceData&quot;); database.setDatabaseName(&quot;[12345678]myDatabase&quot;); bool ok = database.open();</p>
<p>Setting POLICY_DB_WRITE: <a href="qsqldatabase.html">QSqlDatabase</a> database = QSqlDatabase::addDatabase(&quot;QSYMSQL&quot;, &quot;MyConnection&quot;); database.setConnectOptions(&quot;POLICY_DB_DEFAULT=None; POLICY_DB_WRITE=sid[0x12345678], WriteDeviceData&quot;); database.setDatabaseName(&quot;[12345678]myDatabase&quot;); bool ok = database.open();</p>
<p>FOREIGN KEY: Enabling foreign key support from underlying SQLite add: &quot;foreign_keys = ON&quot; to your connection options string. This will be passes to SQLite.</p>
<p>Foreign key Example: <a href="qsqldatabase.html">QSqlDatabase</a> database = QSqlDatabase::addDatabase(&quot;QSYMSQL&quot;, &quot;MyConnection&quot;); database.setDatabaseName(&quot;[12345678]myDatabase&quot;); database.setConnectOptions(&quot;foreign_keys = ON&quot;); bool ok = database.open();</p>
<a name="how-to-build-the-qsymsql-plugin"></a>
<h4>How to Build the QSYMSQL Plugin</h4>
<p>Building QSYMSQL requires Symbian SDK.</p>
<p>The build sequence is similar to the QSQLITE plugin with installing the plugin in the standard location.</p>
<p>Build sequence:</p>
<p>&gt;cd sf<b class="redFont"><code>\mw</code></b><b class="redFont"><code>\qt</code></b><b class="redFont"><code>\src</code></b><b class="redFont"><code>\plugins</code></b><b class="redFont"><code>\sqldrivers</code></b><b class="redFont"><code>\symsql</code></b> &gt;qmake &gt;sbs -c winscw_udeb|armv5_urel</p>
<a name="qibase"></a><a name="qibase-for-borland-interbase"></a>
<h3>QIBASE for Borland InterBase</h3>
<a name="general-information-about-qibase"></a>
<h4>General Information about QIBASE</h4>
<p>The Qt InterBase plugin makes it possible to access the InterBase and Firebird databases. InterBase can either be used as a client/server or without a server in which case it operates on local files. The database file must exist before a connection can be established. Firebird must be used with a server configuration.</p>
<p>Note that InterBase requires you to specify the full path to the database file, no matter whether it is stored locally or on another server.</p>
<pre class="cpp"> db<span class="operator">.</span>setHostName(<span class="string">&quot;MyServer&quot;</span>);
 db<span class="operator">.</span>setDatabaseName(<span class="string">&quot;C:\\test.gdb&quot;</span>);</pre>
<p>You need the InterBase/Firebird development headers and libraries to build this plugin.</p>
<p>Due to license incompatibilities with the GPL, users of the Qt Open Source Edition are not allowed to link this plugin to the commercial editions of InterBase. Please use Firebird or the free edition of InterBase.</p>
<a name="qibase-unicode-support-and-text-encoding"></a>
<h4>QIBASE Unicode Support and Text Encoding</h4>
<p>By default the driver connects to the database using UNICODE_FSS. This can be overridden by setting the ISC_DPB_LC_CTYPE parameter with <a href="qsqldatabase.html#setConnectOptions">QSqlDatabase::setConnectOptions</a>() before opening the connection.</p>
<pre class="cpp"> <span class="comment">// connect to database using the Latin-1 character set</span>
 db<span class="operator">.</span>setConnectOptions(<span class="string">&quot;ISC_DPB_LC_CTYPE=Latin1&quot;</span>);
 db<span class="operator">.</span>open();</pre>
<p>If Qt doesn't support the given text encoding the driver will issue a warning message and connect to the database using UNICODE_FSS.</p>
<p>Note that if the text encoding set when connecting to the database is not the same as in the database, problems with transliteration might arise.</p>
<a name="qibase-stored-procedures"></a>
<h4>QIBASE Stored procedures</h4>
<p>InterBase/Firebird return OUT values as result set, so when calling stored procedure, only IN values need to be bound via <a href="qsqlquery.html#bindValue">QSqlQuery::bindValue</a>(). The RETURN/OUT values can be retrieved via <a href="qsqlquery.html#value">QSqlQuery::value</a>(). Example:</p>
<pre class="cpp"> <span class="type"><a href="qsqlquery.html">QSqlQuery</a></span> q;
 q<span class="operator">.</span>exec(<span class="string">&quot;execute procedure my_procedure&quot;</span>);
 q<span class="operator">.</span>next();
 <a href="qtglobal.html#qDebug">qDebug</a>() <span class="operator">&lt;</span><span class="operator">&lt;</span> q<span class="operator">.</span>value(<span class="number">0</span>); <span class="comment">// outputs the first RETURN/OUT value</span></pre>
<a name="how-to-build-the-qibase-plugin-on-unix-and-mac-os-x"></a>
<h4>How to Build the QIBASE Plugin on Unix and Mac OS X</h4>
<p>The following assumes InterBase or Firebird is installed in <tt>/opt/interbase</tt>:</p>
<p>If you are using InterBase:</p>
<pre class="cpp"> cd $QTDIR/src/plugins/sqldrivers/ibase
 qmake &quot;INCLUDEPATH+=/opt/interbase/include&quot; &quot;LIBS+=-L/opt/interbase/lib&quot; ibase.pro
 make</pre>
<p>If you are using Firebird, the Firebird library has to be set explicitly:</p>
<pre class="cpp"> cd $QTDIR/src/plugins/sqldrivers/ibase
 qmake &quot;INCLUDEPATH+=/opt/interbase/include&quot; &quot;LIBS+=-L/opt/interbase/lib -lfbclient&quot; ibase.pro
 make</pre>
<a name="how-to-build-the-qibase-plugin-on-windows"></a>
<h4>How to Build the QIBASE Plugin on Windows</h4>
<p>The following assumes InterBase or Firebird is installed in <tt>C:\interbase</tt>:</p>
<p>If you are using InterBase:</p>
<pre class="cpp"> cd %QTDIR%\src\plugins\sqldrivers\ibase
 qmake &quot;INCLUDEPATH+=C:\interbase\include&quot; ibase.pro
 nmake</pre>
<p>If you are using Firebird, the Firebird library has to be set explicitely:</p>
<pre class="cpp"> cd %QTDIR%\src\plugins\sqldrivers\ibase
 qmake &quot;INCLUDEPATH+=C:\interbase\include&quot; &quot;LIBS+=-lfbclient&quot; ibase.pro
 nmake</pre>
<p>If you are not using a Microsoft compiler, replace <tt>nmake</tt> with <tt>make</tt> in the line above.</p>
<p>Note that <tt>C:\interbase\bin</tt> must be in the <tt>PATH</tt>.</p>
<p><b>Note:</b> This database plugin is not supported for Windows CE.</p>
<a name="troubleshooting"></a><a name="troubleshooting"></a>
<h2>Troubleshooting</h2>
<p>You should always use client libraries that have been compiled with the same compiler as you are using for your project. If you cannot get a source distibution to compile the client libraries yourself, you must make sure that the pre-compiled library is compatible with your compiler, otherwise you will get a lot of &quot;undefined symbols&quot; errors. Some compilers have tools to convert libraries, e.g&#x2e; Borland ships the tool <tt>COFF2OMF.EXE</tt> to convert libraries that have been generated with Microsoft Visual C++.</p>
<p>If the compilation of a plugin succeeds but it cannot be loaded, make sure that the following requirements are met:</p>
<ul>
<li>Ensure that you are using a shared Qt library; you cannot use the plugins with a static build.</li>
<li>Ensure that the plugin is in the correct directory. You can use <a href="qcoreapplication.html#libraryPaths">QApplication::libraryPaths</a>() to determine where Qt looks for plugins.</li>
<li>Ensure that the client libraries of the DBMS are available on the system. On Unix, run the command <tt>ldd</tt> and pass the name of the plugin as parameter, for example <tt>ldd libqsqlmysql.so</tt>. You will get a warning if any of the client libraries couldn't be found. On Windows, you can use Visual Studio's dependency walker.</li>
<li>Compile Qt with <tt>QT_DEBUG_COMPONENT</tt> defined to get very verbose debug output when loading plugins.</li>
</ul>
<p>Make sure you have followed the guide to <a href="deployment-plugins.html">Deploying Plugins</a>. If you experience plugin load problems and see output like this:</p>
<pre class="cpp"> <span class="type"><a href="qsqldatabase.html">QSqlDatabase</a></span>: QMYSQL driver <span class="keyword">not</span> loaded
 <span class="type"><a href="qsqldatabase.html">QSqlDatabase</a></span>: available drivers: QMYSQL</pre>
<p>the problem is usually that the plugin had the wrong <a href="deployment-plugins.html#the-build-key">build key</a>. This might require removing an entry from the <a href="deployment-plugins.html#the-plugin-cache">plugin cache</a>.</p>
<a name="development"></a><a name="how-to-write-your-own-database-driver"></a>
<h2>How to Write Your Own Database Driver</h2>
<p><a href="qsqldatabase.html">QSqlDatabase</a> is responsible for loading and managing database driver plugins. When a database is added (see <a href="qsqldatabase.html#addDatabase">QSqlDatabase::addDatabase</a>()), the appropriate driver plugin is loaded (using <a href="qsqldriverplugin.html">QSqlDriverPlugin</a>). <a href="qsqldatabase.html">QSqlDatabase</a> relies on the driver plugin to provide interfaces for <a href="qsqldriver.html">QSqlDriver</a> and <a href="qsqlresult.html">QSqlResult</a>.</p>
<p><a href="qsqldriver.html">QSqlDriver</a> is an abstract base class which defines the functionality of a SQL database driver. This includes functions such as <a href="qsqldriver.html#open">QSqlDriver::open</a>() and <a href="qsqldriver.html#close">QSqlDriver::close</a>(). <a href="qsqldriver.html">QSqlDriver</a> is responsible for connecting to a database, establish the proper environment, etc. In addition, <a href="qsqldriver.html">QSqlDriver</a> can create <a href="qsqlquery.html">QSqlQuery</a> objects appropriate for the particular database API. <a href="qsqldatabase.html">QSqlDatabase</a> forwards many of its function calls directly to <a href="qsqldriver.html">QSqlDriver</a> which provides the concrete implementation.</p>
<p><a href="qsqlresult.html">QSqlResult</a> is an abstract base class which defines the functionality of a SQL database query. This includes statements such as <tt>SELECT</tt>, <tt>UPDATE</tt>, and <tt>ALTER</tt> <tt>TABLE</tt>. <a href="qsqlresult.html">QSqlResult</a> contains functions such as QSqlResult::next() and QSqlResult::value(). <a href="qsqlresult.html">QSqlResult</a> is responsible for sending queries to the database, returning result data, etc. <a href="qsqlquery.html">QSqlQuery</a> forwards many of its function calls directly to <a href="qsqlresult.html">QSqlResult</a> which provides the concrete implementation.</p>
<p><a href="qsqldriver.html">QSqlDriver</a> and <a href="qsqlresult.html">QSqlResult</a> are closely connected. When implementing a Qt SQL driver, both of these classes must to be subclassed and the abstract virtual methods in each class must be implemented.</p>
<p>To implement a Qt SQL driver as a plugin (so that it is recognized and loaded by the Qt library at runtime), the driver must use the <a href="qtplugin.html#Q_EXPORT_PLUGIN2">Q_EXPORT_PLUGIN2</a>() macro. Read <a href="plugins-howto.html">How to Create Qt Plugins</a> for more information on this. You can also check out how this is done in the SQL plugins that are provided with Qt in <tt>QTDIR/src/plugins/sqldrivers</tt> and <tt>QTDIR/src/sql/drivers</tt>.</p>
<p>The following code can be used as a skeleton for a SQL driver:</p>
<pre class="cpp"> <span class="keyword">class</span> XyzResult : <span class="keyword">public</span> <span class="type"><a href="qsqlresult.html">QSqlResult</a></span>
 {
 <span class="keyword">public</span>:
     XyzResult(<span class="keyword">const</span> <span class="type"><a href="qsqldriver.html">QSqlDriver</a></span> <span class="operator">*</span>driver)
         : <span class="type"><a href="qsqlresult.html">QSqlResult</a></span>(driver) {}
     <span class="operator">~</span>XyzResult() {}

 <span class="keyword">protected</span>:
     <span class="type"><a href="qvariant.html">QVariant</a></span> data(<span class="type">int</span> <span class="comment">/* index */</span>) { <span class="keyword">return</span> <span class="type"><a href="qvariant.html">QVariant</a></span>(); }
     <span class="type">bool</span> isNull(<span class="type">int</span> <span class="comment">/* index */</span>) { <span class="keyword">return</span> <span class="keyword">false</span>; }
     <span class="type">bool</span> reset(<span class="keyword">const</span> <span class="type"><a href="qstring.html">QString</a></span> <span class="operator">&amp;</span> <span class="comment">/* query */</span>) { <span class="keyword">return</span> <span class="keyword">false</span>; }
     <span class="type">bool</span> fetch(<span class="type">int</span> <span class="comment">/* index */</span>) { <span class="keyword">return</span> <span class="keyword">false</span>; }
     <span class="type">bool</span> fetchFirst() { <span class="keyword">return</span> <span class="keyword">false</span>; }
     <span class="type">bool</span> fetchLast() { <span class="keyword">return</span> <span class="keyword">false</span>; }
     <span class="type">int</span> size() { <span class="keyword">return</span> <span class="number">0</span>; }
     <span class="type">int</span> numRowsAffected() { <span class="keyword">return</span> <span class="number">0</span>; }
     <span class="type"><a href="qsqlrecord.html">QSqlRecord</a></span> record() <span class="keyword">const</span> { <span class="keyword">return</span> <span class="type"><a href="qsqlrecord.html">QSqlRecord</a></span>(); }
 };

 <span class="keyword">class</span> XyzDriver : <span class="keyword">public</span> <span class="type"><a href="qsqldriver.html">QSqlDriver</a></span>
 {
 <span class="keyword">public</span>:
     XyzDriver() {}
     <span class="operator">~</span>XyzDriver() {}

     <span class="type">bool</span> hasFeature(DriverFeature <span class="comment">/* feature */</span>) <span class="keyword">const</span> { <span class="keyword">return</span> <span class="keyword">false</span>; }
     <span class="type">bool</span> open(<span class="keyword">const</span> <span class="type"><a href="qstring.html">QString</a></span> <span class="operator">&amp;</span> <span class="comment">/* db */</span><span class="operator">,</span> <span class="keyword">const</span> <span class="type"><a href="qstring.html">QString</a></span> <span class="operator">&amp;</span> <span class="comment">/* user */</span><span class="operator">,</span>
               <span class="keyword">const</span> <span class="type"><a href="qstring.html">QString</a></span> <span class="operator">&amp;</span> <span class="comment">/* password */</span><span class="operator">,</span> <span class="keyword">const</span> <span class="type"><a href="qstring.html">QString</a></span> <span class="operator">&amp;</span> <span class="comment">/* host */</span><span class="operator">,</span>
               <span class="type">int</span> <span class="comment">/* port */</span><span class="operator">,</span> <span class="keyword">const</span> <span class="type"><a href="qstring.html">QString</a></span> <span class="operator">&amp;</span> <span class="comment">/* options */</span>)
         { <span class="keyword">return</span> <span class="keyword">false</span>; }
     <span class="type">void</span> close() {}
     <span class="type"><a href="qsqlresult.html">QSqlResult</a></span> <span class="operator">*</span>createResult() <span class="keyword">const</span> { <span class="keyword">return</span> <span class="keyword">new</span> XyzResult(<span class="keyword">this</span>); }
 };</pre>
</div>
<!-- @@@sql-driver.html -->
      </div>
    </div>
    </div> 
    <div class="ft">
      <span></span>
    </div>
  </div> 
  <div class="footer">
    <p>
      <acronym title="Copyright">&copy;</acronym> 2015 The Qt Company Ltd.
      Documentation contributions included herein are the copyrights of
      their respective owners.</p>
    <br />
    <p>
      The documentation provided herein is licensed under the terms of the
      <a href="http://www.gnu.org/licenses/fdl.html">GNU Free Documentation
      License version 1.3</a> as published by the Free Software Foundation.</p>
    <p>
      Documentation sources may be obtained from <a href="http://www.qt-project.org">
      www.qt-project.org</a>.</p>
    <br />
    <p>
      Qt and respective logos are trademarks of The Qt Company Ltd 
      in Finland and/or other countries worldwide. All other trademarks are property
      of their respective owners. <a title="Privacy Policy"
      href="http://en.gitorious.org/privacy_policy/">Privacy Policy</a></p>
  </div>

  <script src="scripts/functions.js" type="text/javascript"></script>
</body>
</html>
